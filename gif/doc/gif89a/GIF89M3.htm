<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<HTML>
<!--	The Structure of Frames
+-----+------+	["GIF89M.htm"]
| toc |      |	|
+-----+ spec |	+--+--("GIF89M1.htm", "GIF89M_toc")
|index|      |	|  +--("GIF89M2.htm", "GIF89M_index")
+-----+------+	+-----("GIF89M3.htm", "GIF89M_spec")	-- THIS
-->
<HEAD>
<meta name="last_updated"	content="1999-03-08T00:00:00+0900">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<meta http-equiv="Content-Script-Type" content="text/javascript">
<title>The GIF89a (modified) Specification</title>
<meta name="description"	content="This is a GIF89a modified specification which is converted from GIF89M.TXT into the HTML format.">
<meta name="keywords"		content="Grahics Interchange Format programming reference, GIF version 89a, GIF89a (modified) specification, GIF89M.TXT, GIF89A.TXT, GIF89A.DOC, HTML, YukinoriWatanabe">
<meta name="author"		content="Yukinori Watanabe">
<meta name="author_email"	content="xyuki@iname.com">
<meta name="copyright"		content="HTML conversion Copyright (C)1998 Yukinori Watanabe">
<link rel="made"		href="mailto:xyuki@iname.com">

<!-- base href="http://www.GeoCities.co.jp/SiliconValley/3453/gif_info/spec/GIF89M3.htm" -->
<link rel="alternate"	type="text/html" href="GIF89MJ3.htm" hreflang="jp" charset="shift_jis" lang="jp" title="“ú–{Œê–ó GIF89a (modified) Žd—l‘">
<link rel="start"	type="text/html" href="GIF89M.htm">
<link rel="contents"	type="text/html" href="GIF89M1.htm">
<link rel="index"	type="text/html" href="GIF89M2.htm">

<script language="JavaScript">
<!--
var	NoFrame = (window.name != "GIF89M_spec")
function ToC() {if (NoFrame) document.write('[<a href="#ToC">Table of Contents<\/a>]<br>')}
// -->
</script>
<style>
<!--
h1, h2, h3, h4, h5, h6 {margin-left:2; margin-right:2; color: #000000;}
pre	{margin-left:2;}
p	{margin-left:16; margin-right:	16;}
blockquote {margin-left:24; margin-right:16;}
-->
</style>
</HEAD>

<body bgcolor="#FFFFF0" text="#000000" link="#A00000" vlink="#A00000" alink="#FF0000">
<a name="Top">&nbsp;</a><br>
<script language="JavaScript">
<!--
if (NoFrame) document.write('<nobr><font color="#FF0000">You browse this document without <b>FRAMES<\/b>.<\/font> <wbr>If your browser supports frames, <a target="_top" href="GIF89M.htm">please click here<\/a>.<\/nobr><hr size=3>');
// -->
</script>
<noscript>
<div align=center><!--#geoguide--></div>
Please browse this document with MSIE/NN 3.0 or later, if you can.
This message is output when JavaScript isn't supported.
<hr size=3>
</noscript>
<p>This document is an HTML conversion of :</p>
<p align=center><b>
GRAPHICS INTERCHANGE FORMAT<br>
Version 89a (modified)<br>
Programming Reference<br>
<br>
GIF89M.TXT (January 9, 1995)
</b>
</p>
<p><small>
The Graphics Interchange Format&copy; is the Copyright property of CompuServe Incorporated.<br>
GIF<font size="-1"><sup>(sm)</sup></font> is a Service Mark property of CompuServe Incorporated.</small></p>
<hr size=1 width="98%" noshade>

<!-- *******************   LAST UPDATED   ********************* -->
<!-- **                                                      ** -->
	<p>Last Updated: 1999-Mar-08</p>
<!-- **                                                      ** -->
<!-- ********************************************************** -->

<p>If you find errors from this HTML document, please send e-mail to <nobr>&quot;Yukinori Watanabe&quot; &lt;<a href="mailto:xyuki@iname.com">xyuki@iname.com</a>&gt;</nobr>.</p>
<p>This document and other materials are distributed at<br><a target="_top" href="http://www.geocities.co.jp/SiliconValley/3453/gif_info/index.html">http://www.geocities.co.jp/SiliconValley/3453/gif_info/index.html</a>.</p>
<p>I hope this conversion helps.  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>Yukinori Watanabe</i> :-)</p>

<table border=0 cellspacing=0 cellpadding=0>
<tr>	<td width=16></td>
	<td>
		<table border=1 cellspacing=0 cellpadding=4 bgcolor="#CCCCCC">
		<tr><td><b>NOTE:</b> In this HTML document, all gray boxes, like this, were inserted by me (the converter of this HTML document). <div align=right><i>Yukinori Watanabe</i></div></td></tr>
		</table>
	</td>
	<td width=16></td>
</tr>
</table>
<br>

<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr size=3>
<br>
<center><a name="CoverSheet"><i>Cover Sheet for the GIF89a Specification</i></a></center>
<br>

<a name="DeferredClearCode">
<H3>DEFERRED CLEAR CODE IN LZW COMPRESSION</H3></a>
<p>
There has been confusion about where <a href="#ClearCode">clear codes</a> can be found in the <a href="#DataStream">data stream</a>.  As the specification says, they may appear at anytime. There is not a requirement to send a clear code when the string table is full.
</p>
<p>
It is the <a href="#TheEncoder">encoder</a>'s decision as to when the table should be cleared.  When the table is full, the encoder can chose to use the table as is, making no changes to it until the encoder chooses to clear it.  The encoder during this time sends out codes that are of the <a href="#MaximumCodeSize">maximum Code Size</a>.
</p>
<p>
As we can see from the above, when the <a href="#TheDecoder">decoder</a>'s table is full, it must not change the table until a clear code is received. The Code Size is that of the <a href="#MaximumCodeSize">maximum Code Size</a>.  Processing other than this is done normally.
</p>
<p>
Because of a large base of decoders that do not handle the decompression in this manner, we ask developers of GIF encoding software to NOT implement this feature until at least January 1991 and later if they see that their particular market is not ready for it.  This will give developers of GIF decoding software time to implement this feature and to get it into the hands of their clients before the decoders start &quot;breaking&quot; on the new GIF's.  It is not required that encoders change their software to take advantage of the deferred clear code, but it is for decoders.
</p>
<br>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<br>
<a name="CourtesyDirectoryFile">
<H3>APPLICATION EXTENSION BLOCK - APPLICATION IDENTIFIER</H3></a>
<p>
There will be a Courtesy Directory file located on CompuServe in the PICS forum. This directory will contain <a href="#26ApplicationIdentifier">Application Identifiers</a> for <a href="#ApplicationExtension">Application Extension Blocks</a> that have been used by developers of GIF applications. This file is intended to help keep developers that wish to create Application Extension Blocks from using the same Application Identifiers. This is not an official directory; it is for voluntary participation only and does not guarantee that someone will not use the same identifier.
</p>
<p>
E-Mail can be sent to Larry Wood (forum manager of PICS) indicating the request for inclusion in this file with an identifier.
</p>
<table border=0 cellspacing=0 cellpadding=0>
<tr>	<td width=16></td>
	<td>
		<table border=1 cellspacing=0 cellpadding=4 bgcolor="#CCCCCC">
		<tr><td>Note: At present (Sep., 1998), the Courtesy Directory file is distributed in the Graphics Developers Forum as "Unofficial registry of GIF89a application IDs" (Lib:12 Standards/Specs, EXTAPP.TXT). And its maintainer is Matt Drury (<a href="mailto:matt@csi.com">matt@csi.com</a>), Forums Manager for 'Go Graphics.'</td></tr>
		</table>
	</td>
	<td width=16></td>
</tr>
</table>
<br>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<br>
<hr size=3>
<br>
<br>
<center>
<H2><a name="Title">GRAPHICS&nbsp;&nbsp;INTERCHANGE&nbsp;&nbsp;FORMAT <sup>(sm)</sup></a></H2>
<br>
<H3>Version 89a (modified)</H3>
<br>
<H4>&copy;1987,1988,1989,1990</H4>
<br>
<H4>Copyright<br></H4>
<H4>CompuServe Incorporated</H4>
<H4>Columbus, Ohio</H4>
<br>

<table border=0 width="100%">
<tr><td aligh="left"><b>CompuServe Incorporated</b></td><td align="right"><b>Graphics Interchange Format</b></td></tr>
<tr><td aligh="left"><b>Document Date : 9 January, 1995</b></td><td align="right"><b>Programming Reference</b></td></tr>
</table>

<hr size=1>

<table border=0 cellspacing=3 cellpadding=0>
<tr><td colspan=2 align="left"><br><H2><a name="ToC">Table of Contents</a></H2></td></tr>
<tr>
<td valign="top" align="left">

<table border=0>
<tr><td valign="top" align="right" nowrap>1.</td><td valign="top"><a href="#Disclaimer">Disclaimer</a></td></tr>
<tr><td valign="top" align="right" nowrap>2.</td><td valign="top"><a href="#Foreword">Foreword</a></td></tr>
<tr><td valign="top" align="right" nowrap>3.</td><td valign="top"><a href="#Licensing">Licensing</a></td></tr>
<tr><td valign="top" align="right" nowrap>4.</td><td valign="top"><a href="#AboutTheDocument">About the Document</a></td></td>
<tr><td valign="top" align="right" nowrap>5.</td><td valign="top"><a href="#GeneralDescription">General Description</a></td></tr>
<tr><td valign="top" align="right" nowrap>6.</td><td valign="top"><a href="#VersionNumbers">Version Numbers</a></td></tr>
<tr><td valign="top" align="right" nowrap>7.</td><td valign="top"><a href="#TheEncoder">The Encoder</a></td></tr>
<tr><td valign="top" align="right" nowrap>8.</td><td valign="top"><a href="#TheDecoder">The Decoder</a></td></tr>
<tr><td valign="top" align="right" nowrap>9.</td><td valign="top"><a href="#Compliance">Compliance</a></td></tr>
<tr><td valign="top" align="right" nowrap>10.</td><td valign="top"><a href="#AboutRecommendations">About Recommendations</a></td></tr>
<tr><td valign="top" align="right" nowrap>11.</td><td valign="top"><a href="#AboutColorTables">About Color Tables</a></td></tr>
<tr><td valign="top" align="right" nowrap>12.</td><td valign="top"><a href="#BlocksExtensionsScope">Blocks, Extensions and Scope</a></td></tr>
<tr><td valign="top" align="right" nowrap>13.</td><td valign="top"><a href="#BlockSizes">Block Sizes</a></td></tr>
<tr><td valign="top" align="right" nowrap>14.</td><td valign="top"><a href="#UsingGIFAsAnEmbeddedProtocol">Using GIF as an embedded protocol</a></td></tr>
</table>

</td>
<td valign="top" align="left">

<table border=0>
<tr><td valign="top" align="right" nowrap>15.</td><td valign="top"><a href="#DataSub-blocks">Data Sub-blocks</a></td></tr>
<tr><td valign="top" align="right" nowrap>16.</td><td valign="top"><a href="#BlockTerminator">Block Terminator</a></td></tr>
<tr><td valign="top" align="right" nowrap>17.</td><td valign="top"><a href="#Header">Header</a></td></tr>
<tr><td valign="top" align="right" nowrap>18.</td><td valign="top"><a href="#LogicalScreenDescriptor">Logical Screen Descriptor</a></td></tr>
<tr><td valign="top" align="right" nowrap>19.</td><td valign="top"><a href="#GlobalColorTable">Global Color Table</a></td></tr>
<tr><td valign="top" align="right" nowrap>20.</td><td valign="top"><a href="#ImageDescriptor">Image Descriptor</a></td></tr>
<tr><td valign="top" align="right" nowrap>21.</td><td valign="top"><a href="#LocalColorTable">Local Color Table</a></td></tr>
<tr><td valign="top" align="right" nowrap>22.</td><td valign="top"><a href="#TableBasedImageData">Table Based Image Data</a></td></tr>
<tr><td valign="top" align="right" nowrap>23.</td><td valign="top"><a href="#GraphicControlExtension">Graphic Control Extension</a></td></tr>
<tr><td valign="top" align="right" nowrap>24.</td><td valign="top"><a href="#CommentExtension">Comment Extension</a></td></tr>
<tr><td valign="top" align="right" nowrap>25.</td><td valign="top"><a href="#PlainTextExtension">Plain Text Extension</a></td></tr>
<tr><td valign="top" align="right" nowrap>26.</td><td valign="top"><a href="#ApplicationExtension">Application Extension</a></td></tr>
<tr><td valign="top" align="right" nowrap>27.</td><td valign="top"><a href="#Trailer">Trailer</a></td></tr>
</table>

</td>
</tr>
<tr><td colspan=2 align="left"><br><h3>Appendix</h3></td></tr>
<tr>
<td valign="top" align="left">

<table border=0>
<tr><td valign="top" align="right" nowrap>A.</td><td valign="top"><a href="#QuickReferenceTable">Quick Reference Table</a></td></tr>
<tr><td valign="top" align="right" nowrap>B.</td><td valign="top"><a href="#GIFGrammar">GIF Grammar</a></td></tr>
<tr><td valign="top" align="right" nowrap>C.</td><td valign="top"><a href="#Glossary">Glossary</a></td></tr>
<tr><td valign="top" align="right" nowrap>D.</td><td valign="top"><a href="#Conventions">Conventions</a></td></tr>
</table>

</td>
<td valign="top" align="left">

<table border=0>
<tr><td valign="top" align="right" nowrap>E.</td><td valign="top"><a href="#InterlacedImages">Interlaced Images</a></td></tr>
<tr><td valign="top" align="right" nowrap>F.</td><td valign="top"><a href="#Variable-Length-CodeLZWCompression">Variable-Length-Code LZW Compression</a></td></tr>
<tr><td valign="top" align="right" nowrap>G.</td><td valign="top"><a href="#On-lineCapabilitiesDialogue">On-line Capabilities Dialogue</a></td></tr>
</table>

</td>
</tr>
</table>
</center>
<br>
<hr size=3>
<br>


<H2><a name="Disclaimer">1. Disclaimer.</a></H2>
<p>
The information provided herein is subject to change without notice. In no event will CompuServe Incorporated be liable for damages, including any loss of revenue, loss of profits or other incidental or consequential damages arising out of the use or inability to use the information; CompuServe Incorporated makes no claim as to the suitability of the information.
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="Foreword">2. Foreword.</a></H2>
<p>
This document defines the Graphics Interchange Format<font size="-1"><sup>(sm)</sup></font>. The specification
given here defines version 89a, which is an extension of version 87a.
</p>
<p>
The Graphics Interchange Format<font size="-1"><sup>(sm)</sup></font> as specified here should be considered complete; any deviation from it should be considered invalid, including but not
limited to, the use of reserved or undefined fields within control or data blocks, the inclusion of extraneous data within or between blocks, the use of methods or algorithms not specifically listed as part of the format, etc. In general, any and all deviations, extensions or modifications not specified in this document should be considered to be in violation of the format and should be avoided.
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="Licensing">3. Licensing.</a></H2>
<p>
The Graphics Interchange Format&copy; is the copyright property of CompuServe Incorporated. Only CompuServe Incorporated is authorized to define, redefine, enhance, alter, modify or change in any way the definition of the format.
</p>
<p>
CompuServe Incorporated hereby grants a limited, non-exclusive, royalty-free license for the use of the Graphics Interchange Format<font size="-1"><sup>(sm)</sup></font> in computer software; computer software utilizing GIF<font size="-1"><sup>(sm)</sup></font> must acknowledge ownership of the Graphics Interchange Format and its Service Mark by CompuServe Incorporated, in User and Technical Documentation. Computer software utilizing GIF, which is distributed or may be distributed without User or Technical Documentation must display to the screen or printer a message acknowledging ownership of the Graphics Interchange Format and the Service Mark by CompuServe Incorporated; in this case, the acknowledgement may be displayed in an opening screen or leading banner, or a closing screen or trailing banner. A message such as the following may be used:
</p>
<blockquote>
&quot;The Graphics Interchange Format&copy; is the Copyright property of CompuServe Incorporated. GIF<font size="-1"><sup>(sm)</sup></font> is a Service Mark property of CompuServe Incorporated.&quot;
</blockquote>
<p>
For further information, please contact :
</p>
<blockquote>
      CompuServe Incorporated<br>
      Graphics Technology Department<br>
      5000 Arlington Center Boulevard<br>
      Columbus, Ohio  43220<br>
      U. S. A.<br>
</blockquote>
<p>
CompuServe Incorporated maintains a mailing list with all those individuals and organizations who wish to receive copies of this document when it is corrected or revised. This service is offered free of charge; please provide us with your mailing address.
</p>
<p><a name="Unisys"></a>
Users of this specification should note that the LZW compression and decompression methods described in U.S. Patent No. 4,558,302 and certain corresponding foreign patents are owned by Unisys Corporation.  Software and hardware developers may be required to obtain a license under this patent in order to develop and market products using GIF LZW compression and decompression.  Unisys has agreed that developers may obtain such a license on reasonable, non-discriminatory terms and conditions.  Further information may be obtained from:</p>
<blockquote>
Welch Licensing Department, Office of the General Counsel, M/S C1SW19, Unisys Corporation, Blue Bell, PA 19424.
</blockquote>
<br>
<table border=0 cellspacing=0 cellpadding=0>
<tr><td width=16></td>
<td>

<table border=1 cellspacing=0 cellpadding=4 bgcolor="#CCCCCC">
<tr><td>
	You can obtain further LZW information by the Internet.
	<ul>
	<li>	WWW: License information on GIF and other LZW-based technologies.<br>
		<a target="unisys" href="http://www.unisys.com/LeadStory/lzwfaq.html">http://www.unisys.com/LeadStory/lzwfaq.html</a>
	</li>
	<li>	E-MAIL: Welch Patent Licensing Department<br>
		<a href="mailto:LZW_INFO@UNISYS.COM">mailto:LZW_INFO@Unisys.com</a>
	</li>
	</ul>
</td></tr>
</table>

</td>
<td width=16></td>
</tr>
</table>
<br>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="AboutTheDocument">4. About the Document.</a></H2>
<p>
This document describes in detail the definition of the Graphics Interchange Format.  This document is intended as a programming reference; it is recommended that the entire document be read carefully before programming, because of the interdependence of the various parts. There is an individual section for each of the Format <a href="#BlocksExtensionsScope">blocks</a>. Within each section, the sub-section labeled Required Version refers to the <a href="#VersionNumbers">version number</a> that an <a href="#TheEncoder">encoder</a> will have to use if the corresponding block is used in the <a href="#DataStream">Data Stream</a>. Within each section, a diagram describes the individual fields in the block; the diagrams are drawn vertically; top bytes in the diagram appear first in the Data Stream. Bits within a byte are drawn most significant on the left end.  Multi-byte numeric fields are ordered Least Significant Byte first. Numeric constants are represented as Hexadecimal numbers, preceded by &quot;0x&quot;.  Bit fields within a byte are described in order from most significant bits to least significant bits.
</p>
<table border=0 cellspacing=0 cellpadding=0>
<tr>	<td width=16></td>
	<td>
		<table border=1 cellspacing=0 cellpadding=4 bgcolor="#CCCCCC">
		<tr><td>Note: In this conversion, if a field has a fixed value, the value is written into the field in a diagram. Originally all fields in a diagram were blank.</td></tr>
		</table>
	</td>
	<td width=16></td>
</tr>
</table>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="GeneralDescription">5. General Description.</a></H2>
<p>
The Graphics Interchange Format<font size="-1"><sup>(sm)</sup></font> defines a protocol intended for the on-line transmission and interchange of <a href="#Raster">raster</a> graphic data in a way that is independent of the hardware used in their creation or display.
</p>
<p>
The Graphics Interchange Format is defined in terms of <a href="#BlocksExtensionsScope">blocks</a> and <a href="#DataSub-blocks">sub-blocks</a> which contain relevant parameters and data used in the reproduction of a <a href="#Graphic">graphic</a>. A GIF <a href="#DataStream">Data Stream</a> is a sequence of protocol blocks and sub-blocks representing a collection of graphics. In general, the graphics in a Data Stream are assumed to be related to some degree, and to share some control information; it is recommended that <a href="#TheEncoder">encoders</a> attempt to group together related graphics in order to minimize hardware changes during processing and to minimize control information overhead. For the same reason, unrelated graphics or graphics which require resetting hardware parameters should be encoded separately to the extent possible.
</p>
<p>
A Data Stream may originate locally, as when read from a file, or it may originate remotely, as when transmitted over a data communications line. The Format is defined with the assumption that an error-free Transport Level Protocol is used for communications; the Format makes no provisions for error-detection and error-correction.
</p>
<p>
The GIF Data Stream must be interpreted in context, that is, the application program must rely on information external to the Data Stream to invoke the decoder process.
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="VersionNumbers">6. Version Numbers.</a></H2>
<p>
The <a href="#17Version">version number</a> in the <a href="#Header">Header</a> of a <a href="#DataStream">Data Stream</a> is intended to identify the minimum set of capabilities required of a <a href="#TheDecoder">decoder</a> in order to fully process the Data Stream.  An <a href="#TheEncoder">encoder</a> should use the earliest possible version number that includes all the <a href="#BlocksExtensionsScope">blocks</a> used in the Data Stream. Within each block section in this document, there is an entry labeled Required Version which specifies the earliest version number that includes the corresponding block. The encoder should make every attempt to use the earliest version number covering all the blocks in the Data Stream; the unnecessary use of later version numbers will hinder processing by some decoders.
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="TheEncoder">7. The Encoder.</a></H2>
<p>
The Encoder is the program used to create a GIF <a href="#DataStream">Data Stream</a>. From <a href="#Raster">raster</a> data and other information, the encoder produces the necessary control and data blocks needed for reproducing the original graphics.
</p>
<p>
The encoder has the following primary responsibilities.<br>
<ul>
<li>	Include in the Data Stream all the necessary information to reproduce  the graphics.</li>
<li>	Insure that a Data Stream is labeled with the earliest possible <a href="#VersionNumbers">Version Number</a> that will cover the definition of all the <a href="#BlocksExtensionsScope">blocks</a> in it; this is to ensure that the largest number of <a href="#TheDecoder">decoders</a> can process the Data Stream.</li>
<li>	Ensure encoding of the graphics in such a way that the decoding process is optimized. Avoid redundant information as much as possible.</li>
<li>	To the extent possible, avoid grouping graphics which might require resetting hardware parameters during the decoding process.</li>
<li>	Set to zero (off) each of the bits of each and every field designated as reserved. Note that some fields in the <a href="#LogicalScreenDescriptor">Logical Screen Descriptor</a> and the <a href="#ImageDescriptor">Image Descriptor</a> were reserved under Version 87a, but are used under version 89a.</li>
</ul>
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="TheDecoder">8. The Decoder.</a></H2>
<p>
The Decoder is the program used to process a GIF <a href="#DataStream">Data Stream</a>. It processes the Data Stream sequentially, parsing the various <a href="#BlocksExtensionsScope">blocks</a> and <a href="#DataSub-blocks">sub-blocks</a>, using the control information to set hardware and process parameters and interpreting the data to render the graphics.
</p>
<p>
The decoder has the following primary responsibilities.<br>
<ul>
<li>	Process each graphic in the Data Stream in sequence, without delays other than those specified in the control information.</li>
<li>	Set its hardware parameters to fit, as closely as possible, the control information contained in the Data Stream.</li>
</ul>
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="Compliance">9. Compliance.</a></H2>
<p>
An <a href="#TheEncoder">encoder</a> or a <a href="#TheDecoder">decoder</a> is said to comply with a given <a href="#VersionNumbers">version</a> of the Graphics Interchange Format if and only if it fully conforms with and correctly implements the definition of the standard associated with that version.  An encoder or a decoder may be compliant with a given version number and not compliant with some subsequent version.
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="AboutRecommendations">10. About Recommendations.</a></H2>
<p>
Each <a href="#BlocksExtensionsScope">block</a> section in this document contains an entry labeled Recommendation; this section lists a set of recommendations intended to guide and organize the use of the particular blocks. Such recommendations are geared towards making the functions of <a href="#TheEncoder">encoders</a> and <a href="#TheDecoder">decoders</a> more efficient, as well as making optimal use of the communications bandwidth.  It is advised that these recommendations be followed.
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="AboutColorTables">11. About Color Tables.</a></H2>
<p>
The GIF format utilizes color tables to render <a href="#Raster">raster</a>-based graphics. A color table can have one of two different scopes: global or local. A <a href="#GlobalColorTable">Global Color Table</a> is used by all those graphics in the <a href="#DataStream">Data Stream</a> which do not have a <a href="#LocalColorTable">Local Color Table</a> associated with them. The scope of the Global Color Table is the entire Data Stream. A Local Color Table is always associated with the graphic that immediately follows it; the scope of a Local Color Table is limited to that single graphic. A Local Color Table supersedes a Global Color Table, that is, if a Data Stream contains a Global Color Table, and an <a href="#Image">image</a> has a Local Color Table associated with it, the <a href="#TheDecoder">decoder</a> must save the Global Color Table, use the Local Color Table to render the image, and then restore the Global Color Table. Both types of color tables are optional, making it possible for a Data Stream to contain numerous graphics without a color table at all. For this reason, it is recommended that the decoder save the last Global Color Table used until another Global Color Table is encountered. In this way, a Data Stream which does not contain either a Global Color Table or a Local Color Table may be processed using the last Global Color Table saved. If a Global Color Table from a previous Stream is used, that table becomes the Global Color Table of the present Stream. This is intended to reduce the overhead incurred by color tables. In particular, it is recommended that an <a href="#TheEncoder">encoder</a> use only one Global Color Table if all the images in related Data Streams can be rendered with the same table.  If no color table is available at all, the decoder is free to use a system color table or a table of its own. In that case, the decoder may use a color table with as many colors as its hardware is able to support; it is recommended that such a table have black and white as its first two 

ntries, so that monochrome images can be rendered adequately.
</p>
<p>
The Definition of the GIF Format allows for a Data Stream to contain only the <a href="#Header">Header</a>, the <a href="#LogicalScreenDescriptor">Logical Screen Descriptor</a>, a <a href="#GlobalColorTable">Global Color Table</a> and the GIF <a href="#Trailer">Trailer</a>. Such a Data Stream would be used to load a decoder with a Global Color Table, in preparation for subsequent Data Streams without a color table at all.
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="BlocksExtensionsScope">12. Blocks, Extensions and Scope.</a></H2>
<p>
Blocks can be classified into three groups : <a href="#ControlBlocks">Control</a>, <a href="#Graphic-RenderingBlocks">Graphic-Rendering</a> and <a href="#SpecialPurposeBlocks">Special Purpose</a>. <a href="#ControlBlocks">Control blocks</a>, such as the <a href="#Header">Header</a>, the <a href="#LogicalScreenDescriptor">Logical Screen Descriptor</a>, the <a href="#GraphicControlExtension">Graphic Control Extension</a> and the <a href="#Trailer">Trailer</a>, contain information used to control the process of the <a href="#DataStream">Data Stream</a> or information  used in setting hardware parameters. <a href="#Graphic-RenderingBlocks">Graphic-Rendering blocks</a> such as the <a href="#ImageDescriptor">Image Descriptor</a> and the <a href="#PlainTextExtension">Plain Text Extension</a> contain information and data used to render a graphic on the display device. <a href="#SpecialPurposeBlocks">Special Purpose blocks</a> such as the <a href="#CommentExtension">Comment Extension</a> and the <a href="#ApplicationExtension">Application Extension</a> are neither used to control the process of the Data Stream nor do they contain information or data used to render a graphic on the display device. With the exception of the <a href="#LogicalScreenDescriptor">Logical Screen Descriptor</a> and the <a href="#GlobalColorTable">Global Color Table</a>, whose scope is the entire Data Stream, all other Control blocks have a limited scope, restricted to the Graphic-Rendering block that follows them.  Special Purpose blocks do not delimit the scope of any Control blocks; Special Purpose blocks are transparent to the decoding process. Graphic-Rendering blocks and extensions are used as scope delimiters for Control blocks and extensions. <a name="LabelRanges">The labels</a> used to identify labeled blocks fall into three ranges : <a href="#Graphic-RenderingBlocks">0x00-0x7F (0-127) are the Graphic Rendering blocks</a>, excluding the <a href="#Trailer">Trailer (0x3B)</a>; <a href="#ControlBlocks">0x80-0xF9 (128-249) are the Control

blocks</a>; <a href="#SpecialPurposeBlocks">0xFA-0xFF (250-255) are the Special Purpose blocks</a>. These ranges are defined so that <a href="#TheDecoder">decoders</a> can handle block scope by appropriately identifying block labels, even when the block itself cannot be processed.
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="BlockSizes">13. Block Sizes.</a></H2>
<p>
The Block Size field in a block, counts the number of bytes remaining in the block, not counting the Block Size field itself, and not counting the <a href="#BlockTerminator">Block Terminator</a>, if one is to follow. Blocks other than Data Blocks are intended to be of fixed length; the Block Size field is provided in order to facilitate skipping them, not to allow their size to change in the future.  Data blocks and <a href="#DataSub-blocks">sub-blocks</a> are of variable length to accommodate the amount of data.
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="UsingGIFAsAnEmbeddedProtocol">14. Using GIF as an embedded protocol.</a></H2>
<p>
As an embedded protocol, GIF may be part of larger application protocols, within which GIF is used to render graphics.  In such a case, the application protocol could define a block within which the GIF <a href="#DataStream">Data Stream</a> would be contained. The application program would then invoke a GIF <a href="#TheDecoder">decoder</a> upon encountering a block of type GIF.  This approach is recommended in favor of using <a href="#ApplicationExtension">Application Extensions</a>, which become overhead for all other applications that do not process them. Because a GIF Data Stream must be processed in context, the application must rely on some means of identifying the GIF Data Stream outside of the Stream itself.
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="DataSub-blocks">15. Data Sub-blocks.</a></H2>
<ol type="a">
<li><b>Description.</b><br>
	<p>Data Sub-blocks are units containing data. They do not have a label, these blocks are processed in the context of <a href="#ControlBlocks">control blocks</a>, wherever data blocks are specified in the format. The first byte of the Data sub-block indicates the number of data bytes to follow. A data sub-block may contain from 0 to 255 data bytes. The size of the block does not account for the size byte itself, therefore, the empty sub-block is one whose size field contains 0x00.
	</p></li>
<li><b>Required Version.</b><br>
	<p>87a.
	</p></li>
<li><b>Syntax.</b><br>
<pre>
      7 6 5 4 3 2 1 0    Field Name                Type
     +---------------+
  0  |               |   <a href="#15BlockSize">Block Size</a>                Byte
     +---------------+
  1  |               |
     +-             -+
  2  |               |
     +-             -+
  3  |               |
     +-             -+
     |               |   <a href="#15DataValues">Data Values</a>              Byte
     +-             -+
 up  |               |
     +-   . . . .   -+
 to  |               |
     +-             -+
     |               |
     +-             -+
255  |               |
     +---------------+
</pre>
	<ol type="i">
	<li><a name="15BlockSize"><b>Block Size</b></a><br>
		Number of bytes in the Data Sub-block; the size must be within <b>0</b> and <b>255</b> bytes, inclusive.
		<br>&nbsp;</li>
	<li><a name="15DataValues"><b>Data Values</b></a><br>
		Any 8-bit value. There must be exactly as many Data Values as specified by the Block Size field.
		<br>&nbsp;</li>
	</ol>
</li>
<li><b>Extensions and Scope.</b><br>
	<p>This type of block always occurs as part of a larger unit. It does not have a scope of itself.
	</p></li>
<li><b>Recommendation.</b><br>
	<p>None.
	</p></li>
</ol>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="BlockTerminator">16. Block Terminator.</a></H2>
<ol type="a">
<li><b>Description.</b><br>
	<p>This zero-length <a href="#DataSub-blocks">Data Sub-block</a> is used to terminate a sequence of Data Sub-blocks. It contains a single byte in the position of the Block Size field and does not contain data.
	</p></li>
<li><b>Required Version.</b><br>
	<p>87a.
	</p></li>
<li><b>Syntax.</b><br>
<pre>
      7 6 5 4 3 2 1 0    Field Name                Type
     +---------------+
  0  |     0x00      |   <a href="#16BlockSize">Block Size</a>                Byte
     +---------------+
</pre>
	<ol type="i">
	<li><a name="16BlockSize"><b>Block Size</b></a><br>
		Number of bytes in the <a href="#DataSub-blocks">Data Sub-block</a>; this field contains the fixed value 0x00.
		<br>&nbsp;</li>
	<li><b>Data Values</b><br>
		This block does not contain any data.
		<br>&nbsp;</li>
	</ol>
</li>
<li><b>Extensions and Scope.</b><br>
	<p>This block terminates the immediately preceding sequence of <a href="#DataSub-blocks">Data Sub-blocks</a>. This block cannot be modified by any extension.
	</p></li>
<li>	<b>Recommendation.</b><br>
	<p>None.
	</p></li>
</ol>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="Header">17. Header.</a></H2>
<ol type="a">
<li><b>Description.</b><br>
	<p>The Header identifies the GIF <a href="#DataStream">Data Stream</a> in context. The Signature field marks the beginning of the Data Stream, and the <a href="#17Version">Version field</a> identifies the set of capabilities required of a <a href="#TheDecoder">decoder</a> to fully process the Data Stream.  This block is <b>REQUIRED</b>; exactly one Header must be present per Data Stream.
	</p></li>
<li><b>Required Version.</b><br>
	<p>Not applicable. This block is not subject to a version number. This block must appear at the beginning of every Data Stream.
	</p></li>
<li><b>Syntax.</b><br>
<pre>
      7 6 5 4 3 2 1 0    Field Name                Type
     +---------------+
   0 |      'G'      |   <a href="#17Signature">Signature</a>                 3 Bytes
     +-             -+
   1 |      'I'      |
     +-             -+
   2 |      'F'      |
     +---------------+
   3 |               |   <a href="#17Version">Version</a>                   3 Bytes
     +-             -+
   4 |               |
     +-             -+
   5 |               |
     +---------------+
</pre>
<br>
<ol type="i">
<li><a name="17Signature"><b>Signature</b></a><br>
	Identifies the GIF Data Stream. This field contains the fixed value '<b>GIF</b>'.
	<br>&nbsp;</li>
<li><a name="17Version"><b>Version</b></a><br>
	<a href="#VersionNumbers">Version number</a> used to format the data stream. Identifies the minimum set of capabilities necessary to a <a href="#TheDecoder">decoder</a> to fully process the contents of the Data Stream.<br>
	<br>
	<table border=0>
	<tr><td nowrap rowspan=2 valign="top">Verrsion Numbers as of 10 July 1990: &nbsp;</td>
		<td nowrap>&quot;<b>87a</b>&quot; - May 1987</td></tr>
        <tr>	<td nowrap>&quot;<b>89a</b>&quot; - July 1989</td></tr>
	</table>
	<br>
	Version numbers are ordered numerically increasing on the first two digits starting with 87 (87,88,...,99,00,...,85,86) and alphabetically increasing on the third character (a,...,z).
	<br>&nbsp;</li>
</ol>
<li><b>Extensions and Scope.</b><br>
	<p>The scope of this block is the entire Data Stream. This block cannot be modified by any extension.
	</p></li>
<li><b>Recommendations.</b><br>
<br>
<ol type="i">
<li><b><a href="#17Signature">Signature</a></b><br>
	This field identifies the beginning of the GIF Data Stream; it is not intended to provide a unique signature for the identification of the data. It is recommended that the GIF Data Stream be identified externally by the application. (Refer to <a href="#On-lineCapabilitiesDialogue"><nobr>Appendix G</nobr></a> for on-line identification of the GIF Data Stream.)
	<br>&nbsp;</li>
<li><b><a href="#17Version">Version</a></b><br>
	<a href="#TheEncoder">ENCODER</a> : An encoder should use the earliest possible version number that defines all the <a href="#BlocksExtensionsScope">blocks</a> used in the Data Stream. When two or more Data Streams are combined, the latest of the individual version numbers should be used for the resulting Data Stream.<br>
	<a href="#TheDecoder">DECODER</a> : A decoder should attempt to process the data stream to the best of its ability; if it encounters a version number which it is not capable of processing fully, it should nevertheless, attempt to process the data stream to the best of its ability, perhaps after warning the user that the data may be incomplete.
	<br>&nbsp;</li>
</ol>
</ol>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="LogicalScreenDescriptor">18. Logical Screen Descriptor.</a></H2>
<ol type="a">
<li><b>Description.</b><br>
	<p>The Logical Screen Descriptor contains the parameters necessary to define the area of the display device within which the <a href="#Image">images</a> will be rendered.  The coordinates in this block are given with respect to the top-left corner of the virtual screen; they do not necessarily refer to absolute coordinates on the display device.  This implies that they could refer to window coordinates in a window-based environment or printer coordinates when a printer is used.<br>
	This block is <b>REQUIRED</b>; exactly one Logical Screen Descriptor must be present per <a href="#DataStream">Data Stream</a>.
	</p></li>
<li><b>Required Version.</b><br>
	<p>Not applicable. This block is not subject to a <a href="#VersionNumbers">version number</a>. This block must appear immediately after the <a href="#Header">Header</a>.
	</p></li>
<li><b>Syntax.</b><br>
<pre>
      7 6 5 4 3 2 1 0    Field Name                Type
     +---------------+
  0  |               |   <a href="#18LogicalScreenWidth">Logical Screen Width</a>      Unsigned
     +-             -+
  1  |               |
     +---------------+
  2  |               |   <a href="#18LogicalScreenHeight">Logical Screen Height</a>     Unsigned
     +-             -+
  3  |               |
     +---------------+
  4  | |     | |     |   <a href="#18PackedFields">&lt;Packed Fields&gt;</a>           <a href="#18PackedFields">See below</a>
     +---------------+
  5  |               |   <a href="#18BackgroundColorIndex">Background Color Index</a>    Byte
     +---------------+
  6  |               |   <a href="#18PixelAspectRatio">Pixel Aspect Ratio</a>        Byte
     +---------------+

     <a name="18PackedFields">&lt;Packed Fields&gt;</a>  =  <a href="#18GlobalColorTableFlag">Global Color Table Flag</a>     1 Bit
                         <a href="#18ColorResolution">Color Resolution</a>            3 Bits
                         <a href="#18SortFlag">Sort Flag</a>                   1 Bit
                         <a href="#18SizeOfGlobalColorTable">Size of Global Color Table</a>  3 Bits
</pre>
	<ol type="i">
	<li><a name="18LogicalScreenWidth"><b>Logical Screen Width</b></a><br>
		Width, in pixels, of the Logical Screen where the images will be rendered in the displaying device.
		<br>&nbsp;</li>
	<li><a name="18LogicalScreenHeight"><b>Logical Screen Height</b></a><br>
		Height, in pixels, of the Logical Screen where the images will be rendered in the displaying device.
		<br>&nbsp;</li>
	<li><a name="18GlobalColorTableFlag"><b>Global Color Table Flag</b></a><br>
		Flag indicating the presence of a <a href="#GlobalColorTable">Global Color Table</a>; if the flag is set, the Global Color Table will immediately follow the Logical Screen Descriptor. This flag also selects the interpretation of the <a href="#18BackgroundColorIndex">Background Color Index</a>; if the flag is set, the value of the Background Color Index field should be used as the table index of the background color. (This field is the most significant bit of the byte.)<br>
		<br>
		<table border=0>
		<tr>	<td valign="top" nowrap rowspan=2>Values : </td>
			<td align="right" valign="top" nowrap>0 -</td><td valign="top">No Global Color Table follows, the Background Color Index field is meaningless.</td></tr>
		<tr>	<td align="right" valign="top" nowrap>1 -</td><td valign="top">A Global Color Table will immediately follow, the Background Color Index field is meaningful.</td></tr>
		</table>
		<br></li>
	<li><a name="18ColorResolution"><b>Color Resolution</b></a><br>
		Number of bits per primary color available to the original image, minus 1. This value represents the size of the entire palette from which the colors in the graphic were selected, not the number of colors actually used in the graphic. For example, if the value in this field is 3, then the palette of the original image had 4 bits per primary color available to create the image.  This value should be set to indicate the richness of the original palette, even if not every color from the whole palette is available on the source machine.
		<br>&nbsp;</li>
	<li><a name="18SortFlag"><b>Sort Flag</b></a><br>
		Indicates whether the <a href="#GlobalColorTable">Global Color Table</a> is sorted. If the flag is set, the Global Color Table is sorted, in order of decreasing importance. Typically, the order would be decreasing frequency, with most frequent color first. This assists a <a href="#TheDecoder">decoder</a>, with fewer available colors, in choosing the best subset of colors;  the decoder may use an initial segment of the table to render the graphic.<br>
		<br>
		<table border=0>
		<tr>	<td valign="top" nowrap rowspan=2>Values : </td>
			<td align="right" valign="top" nowrap>0 -</td><td valign="top">Not ordered.</td></tr>
		<tr>	<td align="right" valign="top" nowrap>1 -</td><td valign="top">Ordered by decreasing importance, most important color first.</td></tr>
		</table>
		<br></li>
	<li><a name="18SizeOfGlobalColorTable"><b>Size of Global Color Table</b></a><br>
		If the <a href="#18GlobalColorTableFlag">Global Color Table Flag</a> is set to 1, the value in this field is used to calculate the number of bytes contained in the <a href="#GlobalColorTable">Global Color Table</a>. To determine that actual size of the color table, raise 2 to [the value of the field + 1].  Even if there is no Global Color Table specified, set this field according to the above formula so that <a href="#TheDecoder">decoders</a> can choose the best graphics mode to display the stream in.  (This field is made up of the 3 least significant bits of the byte.)
		<br>&nbsp;</li>
	<li><a name="18BackgroundColorIndex"><b>Background Color Index</b></a><br>
		Index into the <a href="#GlobalColorTable">Global Color Table</a> for the Background Color. The Background Color is the color used for those pixels on the screen that are not covered by an image. If the <a href="#18GlobalColorTableFlag">Global Color Table Flag</a> is set to (zero), this field should be zero and should be ignored.
		<br>&nbsp;</li>
	<li><a name="18PixelAspectRatio"><b>Pixel Aspect Ratio</b></a><br>
		Factor used to compute an approximation of the aspect ratio of the pixel in the original image.  If the value of the field is not 0, this approximation of the aspect ratio is computed based on the formula:<br>
		<br>
		<table border=0>
		<tr><td width=40></td><td nowrap>Aspect Ratio = (Pixel Aspect Ratio + 15) / 64</td></tr>
		</table>
		<br>
		The Pixel Aspect Ratio is defined to be the quotient of the pixel's width over its height.  The value range in this field allows specification of the widest pixel of 4:1 to the tallest pixel of 1:4 in increments of 1/64th.<br>
		<br>
		<table border=0>
		<tr>	<td valign="top" nowrap rowspan=2>Values : </td>
			<td align="right" valign="top" nowrap>0 -</td><td valign="top">No aspect ratio information is given.</td></tr>
		<tr>	<td align="right" valign="top" nowrap>1..255 -</td><td valign="top">Value used in the computation.</td></tr>
		</table>
		<br>&nbsp;</li>
	</ol>
<li><b>Extensions and Scope.</b><br>
	<p>The scope of this block is the entire <a href="#DataStream">Data Stream</a>. This block cannot be modified by any extension.
	</p></li>
<li><b>Recommendations.</b><br>
	<p>None.
	</p></li>
</ol>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="GlobalColorTable">19. Global Color Table.</a></H2>
<ol type="a">
<li><b>Description.</b><br>
	<p>This block contains a color table, which is a sequence of bytes representing red-green-blue color triplets. The Global Color Table is used by <a href="#Image">images</a> without a <a href="#LocalColorTable">Local Color Table</a> and by <a href="#PlainTextExtension">Plain Text Extensions</a>. Its presence is marked by the <a href="#18GlobalColorTableFlag">Global Color Table Flag</a> being set to <b>1</b> in the <a href="#LogicalScreenDescriptor">Logical Screen Descriptor</a>; if present, it immediately follows the Logical Screen Descriptor and contains a number of bytes equal to</p>
	<table border=0>
	<tr>
	<td width=40></td>
	<td nowrap>3 x 2^(<a href="#18SizeOfGlobalColorTable">Size of Global Color Table</a>+1).</td>
	</tr>
	</table>
	<br>
	<p>This block is <b>OPTIONAL</b>; at most one Global Color Table may be present per <a href="#DataStream">Data Stream</a>.
	</p></li>
<li><b>Required Version.</b><br>
	<p>87a
	</p></li>
<li><b>Syntax.</b><br>
<pre>
      7 6 5 4 3 2 1 0    Field Name        Type
     +===============+
  0  |               |   Red   0           Byte
     +-             -+
  1  |               |   Green 0           Byte
     +-             -+
  2  |               |   Blue  0           Byte
     +-             -+
  3  |               |   Red   1           Byte
     +-             -+
     |               |   Green 1           Byte
     +-             -+
 up  |               |
     +-   . . . .   -+   ...
 to  |               |
     +-             -+
     |               |   Green 255         Byte
     +-             -+
767  |               |   Blue  255         Byte
     +===============+
</pre>
<li><b>Extensions and Scope.</b><br>
	<p>The scope of this block is the entire Data Stream. This block cannot be modified by any extension.
	</p></li>
<li><b>Recommendation.</b><br>
	<p>None.
	</p></li>
</ol>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="ImageDescriptor">20. Image Descriptor.</a></H2>
<OL TYPE="a">
<li><b>Description.</b><br>
	<p>Each <a href="#Image">image</a> in the <a href="#DataStream">Data Stream</a> is composed of an Image Descriptor, an optional <a href="#LocalColorTable">Local Color Table</a>, and the image data.  Each image must fit within the boundaries of the Logical Screen, as defined in the <a href="#LogicalScreenDescriptor">Logical Screen Descriptor</a>.</p>
	<p>The Image Descriptor contains the parameters necessary to process a <a href="#TableBasedImageData">table based image</a>. The coordinates given in this block refer to coordinates within the Logical Screen, and are given in pixels. This block is a <a href="#Graphic-RenderingBlocks">Graphic-Rendering Block</a>, optionally preceded by one or more <a href="#ControlBlocks">Control blocks</a> such as the <a href="#GraphicControlExtension">Graphic Control Extension</a>, and may be optionally followed by a <a href="#LocalColorTable">Local Color Table</a>; the Image Descriptor is always followed by the image data.</p>
	<p>This block is <b>REQUIRED</b> for an <a href="#Image">image</a>.  Exactly one Image Descriptor must be present per image in the Data Stream.  An unlimited number of images may be present per Data Stream.
	</p></li>
<li><b>Required Version.</b><br>
	<p>87a.
	</p></li>
<li><b>Syntax.</b><br>
<pre>
      7 6 5 4 3 2 1 0    Field Name                Type
     +---------------+
  0  |     0x2C      |   <a href="#20ImageSeparator">Image Separator</a>           Byte
     +---------------+
  1  |               |   <a href="#20ImageLeftPosition">Image Left Position</a>       Unsigned
     +-             -+
  2  |               |
     +---------------+
  3  |               |   <a href="#20ImageTopPosition">Image Top Position</a>        Unsigned
     +-             -+
  4  |               |
     +---------------+
  5  |               |   <a href="#20ImageWidth">Image Width</a>               Unsigned
     +-             -+
  6  |               |
     +---------------+
  7  |               |   <a href="#20ImageHeight">Image Height</a>              Unsigned
     +-             -+
  8  |               |
     +---------------+
  9  | | | |   |     |   &lt;Packed Fields&gt;           See below
     +---------------+

     &lt;Packed Fields&gt;  =  <a href="#20LocalColorTableFlag">Local Color Table Flag</a>     1 Bit
                         <a href="#20InterlaceFlag">Interlace Flag</a>             1 Bit
                         <a href="#20SortFlag">Sort Flag</a>                  1 Bit
                         <a href="#ReservedFields">Reserved</a>                   2 Bits
                         <a href="#20SizeOfLocalColorTable">Size of Local Color Table</a>  3 Bits
</pre>
	<ol type="i">
	<li><a name="20ImageSeparator"><b>Image Separator</b></a><br>
		Identifies the beginning of an Image Descriptor. This field contains the fixed value 0x2C.
		<br>&nbsp;</li>
	<li><a name="20ImageLeftPosition"><b>Image Left Position</b></a><br>
		Column number, in pixels, of the left edge of the image, with respect to the left edge of the <a href="#LogicalScreenDescriptor">Logical Screen</a>. Leftmost column of the Logical Screen is 0.
		<br>&nbsp;</li>
	<li><a name="20ImageTopPosition"><b>Image Top Position</b></a><br>
		Row number, in pixels, of the top edge of the image with respect to the top edge of the <a href="#LogicalScreenDescriptor">Logical Screen</a>. Top row of the Logical Screen is 0.
		<br>&nbsp;</li>
	<li><a name="20ImageWidth"><b>Image Width</b></a><br>
		Width of the image in pixels.
		<br>&nbsp;</li>
	<li><a name="20ImageHeight"><b>Image Height</b></a><br>
		Height of the image in pixels.
		<br>&nbsp;</li>
	<li><a name="20LocalColorTableFlag"><b>Local Color Table Flag</b></a><br>
		Indicates the presence of a <a href="#LocalColorTable">Local Color Table</a> immediately following this Image Descriptor. (This field is the most significant bit of the byte.)<br>
		<br>
		<table border=0>
		<tr>	<td valign="top" nowrap rowspan=2>Values : </td>
			<td valign="top" nowrap>0 -</td><td>Local Color Table is not present. Use <a href="#GlobalColorTable">Global Color Table</a> if available.</td></tr>
		<tr>	<td valign="top" nowrap>1 -</nobr></td><td>Local Color Table present, and to follow immediately after this Image Descriptor.</td></tr>
		</table>
		<br></li>
	<li><a name="20InterlaceFlag"><b>Interlace Flag</b></a><br>
		Indicates if the image is interlaced. An image is interlaced in a four-pass interlace pattern; see <a href="#InterlacedImages"><nobr>Appendix E</nobr></a> fordetails.<br>
		<br>
		<table border=0>
		<tr>	<td valign="top" nowrap rowspan=2>Values : </td>
			<td valign="top" nowrap>0 -</td><td>Image is not interlaced.</td></tr>
		<tr>	<td valign="top" nowrap>1 -</td><td>Image is interlaced.</td></tr>
		</table>
		<br></li>
	<li><a name="20SortFlag"><b>Sort Flag</b></a><br>
		Indicates whether the <a href="#LocalColorTable">Local Color Table</a> is sorted.  If the flag is set, the Local Color Table is sorted, in order of decreasing importance. Typically, the order would be decreasing frequency, with most frequent color first. This assists a <a href="#TheDecoder">decoder</a>, with fewer available colors, in choosing the best subset of colors; the decoder may use an initial segment of the table to render the graphic.<br>
		<br>
		<table border=0>
		<tr>	<td valign="top" nowrap rowspan=2>Values : </td>
			<td valign="top" nowrap>0 -</td><td>Not ordered.</td></tr>
		<tr>	<td valign="top" nowrap>1 -</td><td>Ordered by decreasing importance, most important color first.</td></tr>
		</table>
		<br></li>
	<li><a name="20SizeOfLocalColorTable"><b>Size of Local Color Table</b></a><br>
		If the <a href="#20LocalColorTableFlag">Local Color Table Flag</a> is set to 1, the value in this field is used to calculate the number of bytes contained in the <a href="#LocalColorTable">Local Color Table</a>. To determine that actual size of the color table, raise 2 to the value of the field + 1. This value should be 0 if there is no Local Color Table specified. (This field is made up of the 3 least significant bits of the byte.) 
		<br>&nbsp;</li>
	</ol>
	</li>
<li><b>Extensions and Scope.</b><br>
	<p>The scope of this block is the <a href="#TableBasedImageData">Table-based Image Data</a> Block that follows it. This block may be modified by the <a href="#GraphicControlExtension">Graphic Control Extension</a>.
	</p></li>
<li><b>Recommendation.</b><br>
	<p>None.
	</p></li>
</ol>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="LocalColorTable">21. Local Color Table.</a></H2>
<ol type="a">
<li><b>Description.</b><br>
	<p>This block contains a color table, which is a sequence of bytes representing red-green-blue color triplets. The Local Color Table is used by the <a href="#Image">image</a> that immediately follows. Its presence is marked by the <a href="#20LocalColorTableFlag">Local Color Table Flag</a> being set to 1 in the <a href="#ImageDescriptor">Image Descriptor</a>; if present, the Local Color Table immediately follows the Image Descriptor and contains a number of bytes equal to</p>
	<table border=0>
	<tr>
	<td width=40></td>
	<td nowrap>3 x 2^(<a href="#20SizeOfLocalColorTable">Size of Local Color Table</a>+1).</td>
	</tr>
	</table>
	<br>
	<p>If present, this color table temporarily becomes the <a href="#ActiveColorTable">active color table</a> and the following <a href="#Image">image</a> should be processed using it. This block is <b>OPTIONAL</b>; at most one Local Color Table may be present per <a href="#ImageDescriptor">Image Descriptor</a> and its scope is the single image associated with the <a href="#ImageDescriptor">Image Descriptor</a> that precedes it.
	</p></li>
<li><b>Required Version.</b><br>
	<p>87a.
	</p></li>
<li><b>Syntax.</b><br>
<pre>
      7 6 5 4 3 2 1 0    Field Name        Type
     +===============+
  0  |               |   Red   0           Byte
     +-             -+
  1  |               |   Green 0           Byte
     +-             -+
  2  |               |   Blue  0           Byte
     +-             -+
  3  |               |   Red   1           Byte
     +-             -+
     |               |   Green 1           Byte
     +-             -+
 up  |               |
     +-   . . . .   -+   ...
 to  |               |
     +-             -+
     |               |   Green 255         Byte
     +-             -+
767  |               |   Blue  255         Byte
     +===============+
</pre>
<li><b>Extensions and Scope.</b><br>
	<p>The scope of this block is the <a href="#TableBasedImageData">Table-based Image Data</a> Block that immediately follows it. This block cannot be modified by any extension.
	</p></li>
<li><b>Recommendations.</b><br>
	<p>None.
	</p></li>
</ol>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="TableBasedImageData">22. Table Based Image Data.</a></H2>
<ol type="a">
<li><b>Description.</b><br>
	<p>The <a href="#Image">image</a> data for a table based image consists of a sequence of <a href="#DataSub-blocks">sub-blocks</a>, of size at most 255 bytes each, containing an index into the <a href="#ActiveColorTable">active color table</a>, for each pixel in the image.  Pixel indices are in order of left to right and from top to bottom.  Each index must be within the range of the size of the active color table, starting at 0. The sequence of indices is encoded using the LZW Algorithm with variable-length code, as described in <a href="#Variable-Length-CodeLZWCompression"><nobr>Appendix F</nobr></a>
	</p></li>
<li><b>Required Version.</b><br>
	<p>87a.
	</p></li>
<li><b>Syntax.</b><br>
	<p>The image data format is as follows:</p>
<pre>
      7 6 5 4 3 2 1 0    Field Name                Type
     +---------------+
     |               |   <a href="#22LZWMinimumCodeSize">LZW Minimum Code Size</a>     Byte
     +---------------+

     +===============+
     |               |
     /               /   <a href="#Variable-Length-CodeLZWCompression">Image Data</a>                <a href="#DataSub-blocks">Data Sub-blocks</a>
     |               |
     +===============+
</pre>
	<ol type="i">
	<li><a name="22LZWMinimumCodeSize"><b>LZW Minimum Code Size.</b></a><br>
		This byte determines the initial number of bits used for LZW codes in the image data, as described in <a href="#Variable-Length-CodeLZWCompression"><nobr>Appendix F</nobr></a>.
		<br>&nbsp;</li>
	</ol>
</li>
<li><b>Extensions and Scope.</b><br>
	<p>This block has no scope, it contains <a href="#Raster">raster</a> data. Extensions intended to modify a Table-based image must appear before the corresponding <a href="#ImageDescriptor">Image Descriptor</a>.
	</p></li>
<li><b>Recommendations.</b><br>
	<p>None.
	</p></li>
</ol>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="GraphicControlExtension">23. Graphic Control Extension.</a></H2>
<ol type="a">
<li><b>Description.</b><br>
	<p>The Graphic Control Extension contains parameters used when processing a <a href="#Graphic-RenderingBlocks">graphic rendering block</a>. The scope of this extension is the first graphic rendering block to follow. The extension contains only one <a href="#DataSub-blocks">data sub-block</a>.</p>
	<p>This block is <b>OPTIONAL</b>; at most one Graphic Control Extension may precede a graphic rendering block. This is the only limit to the number of Graphic Control Extensions that may be contained in a <a href="#DataStream">Data Stream</a>.</p>
	</li>
<li><b>Required Version.</b><br>
	<p>89a.</p>
	</li>
<li><b>Syntax.</b><br>
<pre>
      7 6 5 4 3 2 1 0    Field Name                Type
     +---------------+
  0  |     0x21      |   <a href="#23ExtensionIntroducer">Extension Introducer</a>      Byte
     +---------------+
  1  |     0xF9      |   <a href="#23GraphicControlLabel">Graphic Control Label</a>     Byte
     +---------------+

     +---------------+
  0  |     0x04      |   <a href="#23BlockSize">Block Size</a>                Byte
     +---------------+
  1  |     |     | | |   <a href="#23PackedFields">&lt;Packed Fields&gt;</a>           See below
     +---------------+
  2  |               |   <a href="#23DelayTime">Delay Time</a>                Unsigned
     +-             -+
  3  |               |
     +---------------+
  4  |               |   <a href="#23TransparencyIndex">Transparent Color Index</a>   Byte
     +---------------+

     +---------------+
  0  |     0x00      |   <a href="#23BlockTerminator">Block Terminator</a>          Byte
     +---------------+

      <a name="23PackedFields">&lt;Packed Fields&gt;</a>  = <a href="#ReservedFields">Reserved</a>                  3 Bits
                         <a href="#23DisposalMethod">Disposal Method</a>           3 Bits
                         <a href="#23UserInputFlag">User Input Flag</a>           1 Bit
                         <a href="#23TransparencyFlag">Transparent Color Flag</a>    1 Bit
</pre>
	<ol type="i">
	<li><a name="23ExtensionIntroducer"><b>Extension Introducer</b></a><br>
		Identifies the beginning of an extension block. This field contains the fixed value 0x21.
		<br>&nbsp;</li>
	<li><a name="23GraphicControlLabel"><b>Graphic Control Label</b></a><br>
		Identifies the current block as a Graphic Control Extension. This field contains the fixed value 0xF9.
		<br>&nbsp;</li>
	<li><a name="23BlockSize"><b>Block Size</b></a><br>
		Number of bytes in the block, after the Block Size field and up to but not including the <a href="#23BlockTerminator">Block Terminator</a>. This field contains the fixed value 4.
		<br>&nbsp;</li>
	<li><a name="23DisposalMethod"><b>Disposal Method</b></a><br>
		Indicates the way in which the graphic is to be treated after being displayed.<br>
		<br>
		<table border=0>
		<tr>	<td valign="top" nowrap rowspan=5>Values : </td>
			<td valign="top" nowrap align="right">0 -</td><td>No disposal specified. The <a href="#TheDecoder">decoder</a> is not required to take any action.</td></tr>
		<tr>	<td valign="top" nowrap align="right">1 -</td><td>Do not dispose. The graphic is to be left in place.</td></tr>
		<tr>	<td valign="top" nowrap align="right">2 -</td><td>Restore to <a href="#18BackgroundColorIndex">background color</a>. The area used by the graphic must be restored to the background color.</td></tr>
		<tr>	<td valign="top" nowrap align="right">3 -</td><td>Restore to previous. The decoder is required to restore the area overwritten by the graphic with what was there prior to rendering the graphic.</td></tr>
		<tr>	<td valign="top" nowrap align="right">4-7 -</td><td>To be defined.</td></tr>
		</table>
		<br></li>
	<li><a name="23UserInputFlag"><b>User Input Flag</b></a><br>
		Indicates whether or not user input is expected before continuing. If the flag is set, processing will continue when user input is entered. The nature of the User input is determined by the application (Carriage Return, Mouse Button Click, etc.).<br>
		<br>
		<table border=0>
		<tr>	<td valign="top" nowrap rowspan=2>Values : </td>
			<td valign="top" nowrap align="right">0 -</td><td>User input is not expected.</td></tr>
		<tr>	<td valign="top" nowrap align="right">1 -</td><td>User input is expected.</td></tr>
		</table>
		<br>
		When a <a href="#23DelayTime">Delay Time</a> is used and the User Input Flag is set, processing will continue when user input is received or when the delay time expires, whichever occurs first.
		<br>&nbsp;</li>
	<li><a name="23TransparencyFlag"><b>Transparency Flag (Transparent Color Flag)</b></a><br>
		Indicates whether a transparency index is given in the <a href="#23TransparencyIndex">Transparent Index</a> field. (This field is the least significant bit of the byte.)<br>
		<br>
		<table border=0>
		<tr>	<td valign="top" nowrap rowspan=2>Values : </td>
			<td valign="top" nowrap align="right">0 -</td><td>Transparent Index is not given.</td></tr>
		<tr>	<td valign="top" nowrap align="right">1 -</td><td>Transparent Index is given.</td></tr>
		</table>
		<br></li>
	<li><a name="23DelayTime"><b>Delay Time</b></a><br>
		If not 0, this field specifies the number of hundredths (1/100) of a second to wait before continuing with the processing of the Data Stream. The clock starts ticking immediately after the graphic is rendered. This field may be used in conjunction with the <a href="#23UserInputFlag">User Input Flag</a> field.
		<br>&nbsp;</li>
	<li><a name="23TransparencyIndex"><b>Transparency Index (Transparent Color Index)</b></a><br>
		The Transparency Index is such that when encountered, the corresponding pixel of the display device is not modified and processing goes on to the next pixel. The index is present if and only if the <a href="#23TransparencyFlag">Transparency Flag</a> is set to 1.
		<br>&nbsp;</li>
	<li><a name="23BlockTerminator"><b>Block Terminator</b></a><br>
		This zero-length data block marks the end of the Graphic Control Extension.
		<br>&nbsp;</li>
	</ol>
</li>
<li><b>Extensions and Scope.</b><br>
	<p>The scope of this Extension is the <a href="#Graphic-RenderingBlocks">graphic rendering block</a> that follows it; it is possible for other extensions to be present between this block and its target. This block can modify the <a href="#ImageDescriptor">Image Descriptor</a> Block and the <a href="#PlainTextExtension">Plain Text Extension</a>.</p>
	</li>
<li><b>Recommendations.</b><br>
	<br>
	<ol type="i">
	<li><a href="#23DisposalMethod"><b>Disposal Method</b></a><br>
		The mode Restore To Previous is intended to be used in small sections of the <a href="#Graphic">graphic</a>; the use of this mode imposes severe demands on the <a href="#TheDecoder">decoder</a> to store the section of the graphic that needs to be saved. For this reason, this mode should be used sparingly.  This mode is not intended to save an entire graphic or large areas of a graphic; when this is the case, the <a href="#TheEncoder">encoder</a> should make every attempt to make the sections of the graphic to be restored be separate graphics in the data stream. In the case where a decoder is not capable of saving an area of a graphic marked as Restore To Previous, it is recommended that a decoder restore to the <a href="#18BackgroundColorIndex">background color</a>.
		<br>&nbsp;</li>
	<li><a href="#23UserInputFlag"><b>User Input Flag</b></a><br>
		When the flag is set, indicating that user input is expected, the <a href="#TheDecoder">decoder</a> may sound the bell (0x07) to alert the user that input is being expected. In the absence of a specified <a href="#23DelayTime">Delay Time</a>, the decoder should wait for user input indefinitely.  It is recommended that the encoder not set the User Input Flag without a Delay Time specified.
		<br>&nbsp;</li>
	</ol>
</ol>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="CommentExtension">24. Comment Extension.</a></H2>
<ol type="a">
<li><b>Description.</b><br>
	<p>The Comment Extension contains textual information which is not part of the actual <a href="#Graphic">graphics</a> in the GIF <a href="#DataStream">Data Stream</a>. It is suitable for including comments about the graphics, credits, descriptions or any other type of non-control and non-graphic data.  The Comment Extension may be ignored by the <a href="#TheDecoder">decoder</a>, or it may be saved for later processing; under no circumstances should a Comment Extension disrupt or interfere with the processing of the Data Stream.</p>
	<p>This block is <b>OPTIONAL</b>; any number of them may appear in the Data Stream.</p>
	</li>
<li><b>Required Version.</b>
	<p>89a.</p>
	</li>
<li><b>Syntax.</b><br>
<pre>
      7 6 5 4 3 2 1 0    Field Name                Type
     +---------------+
  0  |     0x21      |   <a href="#24ExtensionIntroducer">Extension Introducer</a>      Byte
     +---------------+
  1  |     0xFE      |   <a href="#24CommentLabel">Comment Label</a>             Byte
     +---------------+

     +===============+
     |               |
  N  |               |   <a href="#24CommentData">Comment Data</a>              <a href="#DataSub-blocks">Data Sub-blocks</a>
     |               |
     +===============+

     +---------------+
  0  |     0x00      |   <a href="#24BlockTerminator">Block Terminator</a>          Byte
     +---------------+
</pre>
	<ol type="i">
	<li><a name="24ExtensionIntroducer"><b>Extension Introducer</b></a><br>
		Identifies the beginning of an extension block. This field contains the fixed value 0x21.
		<br>&nbsp;</li>
	<li><a name="24CommentLabel"><b>Comment Label</b></a><br>
		Identifies the block as a Comment Extension. This field contains the fixed value 0xFE.
		<br>&nbsp;</li>
	<li><a name="24CommentData"><b>Comment Data</b></a><br>
		Sequence of <a href="#DataSub-blocks">sub-blocks</a>, each of size at most 255 bytes and at least 1 byte, with the size in a byte preceding the data. The end of the sequence is marked by the <a href="#24BlockTerminator">Block Terminator</a>.
		<br>&nbsp;</li>
	<li><a name="24BlockTerminator"><b>Block Terminator</b></a><br>
		This zero-length data block marks the end of the Comment Extension.
		<br>&nbsp;</li>
	</ol>
	</li>
<li><b>Extensions and Scope.</b><br>
	<p>This block does not have scope. This block cannot be modified by any extension.</p>
	</li>
<li><b>Recommendations.</b><br>
	<br>
	<ol type="i">
	<li><b>Data</b><br>
		This block is intended for humans. It should contain text using the 7-bit ASCII character set. This block should not be used to store control information for custom processing.
		<br>&nbsp;</li>
	<li><b>Position</b><br>
		This block may appear at any point in the Data Stream at which a block can begin; however, it is recommended that Comment Extensions do not interfere with Control or Data blocks; they should be located at the beginning or at the end of the Data Stream to the extent possible.
		<br>&nbsp;</li>
	</ol>
	</li>
</ol>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="PlainTextExtension">25. Plain Text Extension.</a></H2>
<ol type="a">
<li><b>Description.</b><br>
	<p>The Plain Text Extension contains textual data and the parameters necessary to render that data as a <a href="#Graphic">graphic</a>, in a simple form. The textual data will be encoded with the 7-bit printable ASCII characters.  Text data are rendered using a grid of character cells defined by the parameters in the block fields. Each character is rendered in an individual cell. The textual data in this block is to be rendered as mono-spaced characters, one character per cell, with a best fitting font and size. For further information, see the section on <a href="#25Recommendations">Recommendations</a> below. The data characters are taken sequentially from the data portion of the block and rendered within a cell, starting with the upper left cell in the grid and proceeding from left to right and from top to bottom. Text data is rendered until the end of data is reached or the character grid is filled.  The Character Grid contains an integral number of cells; in the case that the cell dimensions do not allow for an integral number, fractional cells must be discarded; an <a href="#TheEncoder">encoder</a> must be careful to specify the grid dimensions accurately so that this does not happen. This block requires a <a href="#GlobalColorTable">Global Color Table</a> to be available; the colors used by this block reference the Global Color Table in the Stream if there is one, or the Global Color Table from a previous Stream, if one was saved. This block is a <a href="#Graphic-RenderingBlocks">graphic rendering block</a>, therefore it may be modified by a <a href="#GraphicControlExtension">Graphic Control Extension</a>. This block is <b>OPTIONAL</b>; any number of them may appear in the <a href="#DataStream">Data Stream</a>.</p>
	</li>
<li><b>Required Version.</b><br>
	<p>89a.</p>
	</li>
<li><b>Syntax.</b><br>
<pre>
      7 6 5 4 3 2 1 0    Field Name                   Type
     +---------------+
  0  |     0x21      |   <a href="#25ExtensionIntroducer">Extension Introducer</a>         Byte
     +---------------+
  1  |     0x01      |   <a href="#25PlainTextLabel">Plain Text Label</a>             Byte
     +---------------+

     +---------------+
  0  |     0x0C      |   <a href="#25BlockSize">Block Size</a>                   Byte
     +---------------+
  1  |               |   <a href="#25TextGridLeftPosition">Text Grid Left Position</a>      Unsigned
     +-             -+
  2  |               |
     +---------------+
  3  |               |   <a href="#25TextGridTopPosition">Text Grid Top Position</a>       Unsigned
     +-             -+
  4  |               |
     +---------------+
  5  |               |   <a href="#25ImageGridWidth">Text Grid Width</a>              Unsigned
     +-             -+
  6  |               |
     +---------------+
  7  |               |   <a href="#25ImageGridHeight">Text Grid Height</a>             Unsigned
     +-             -+
  8  |               |
     +---------------+
  9  |               |   <a href="#25CharacterCellWidth">Character Cell Width</a>         Byte
     +---------------+
 10  |               |   <a href="#25CharacterCellHeight">Character Cell Height</a>        Byte
     +---------------+
 11  |               |   <a href="#25TextForegroundColorIndex">Text Foreground Color Index</a>  Byte
     +---------------+
 12  |               |   <a href="#25TextBackgroundColorIndex">Text Background Color Index</a>  Byte
     +---------------+

     +===============+
     |               |
  N  |               |   <a href="#25PlainTextData">Plain Text Data</a>              <a href="#DataSub-blocks">Data Sub-blocks</a>
     |               |
     +===============+

     +---------------+
  0  |     0x00      |   <a href="#25BlockTerminator">Block Terminator</a>             Byte
     +---------------+
</pre>
	<ol type="i">
	<li><a name="25ExtensionIntroducer"><b>Extension Introducer</b></a><br>
		Identifies the beginning of an extension block. This field contains the fixed value 0x21.
		<br>&nbsp;</li>
	<li><a name="25PlainTextLabel"><b>Plain Text Label</b></a><br>
		Identifies the current block as a Plain Text Extension. This field contains the fixed value 0x01.
		<br>&nbsp;</li>
	<li><a name="25BlockSize"><b>Block Size</b></a><br>
		Number of bytes in the extension, after the Block Size field and up to but not including the beginning of the data portion. This field contains the fixed value 12.
		<br>&nbsp;</li>
	<li><a name="25TextGridLeftPosition"><b>Text Grid Left Position</b></a><br>
		Column number, in pixels, of the left edge of the text grid, with respect to the left edge of the <a href="#LogicalScreenDescriptor">Logical Screen</a>.
		<br>&nbsp;</li>
	<li><a name="25TextGridTopPosition"><b>Text Grid Top Position</b></a><br>
		Row number, in pixels, of the top edge of the text grid, with respect to the top edge of the <a href="#LogicalScreenDescriptor">Logical Screen</a>.
		<br>&nbsp;</li>
	<li><a name="25ImageGridWidth"><b>Image Grid Width (Text Grid Width)</b></a><br>
		Width of the text grid in pixels.
		<br>&nbsp;</li>
	<li><a name="25ImageGridHeight"><b>Image Grid Height (Text Grid Height)</b></a><br>
		Height of the text grid in pixels.
		<br>&nbsp;</li>
	<li><a name="25CharacterCellWidth"><b>Character Cell Width</b></a><br>
		Width, in pixels, of each cell in the grid.
		<br>&nbsp;</li>
	<li><a name="25CharacterCellHeight"><b>Character Cell Height</b></a><br>
		Height, in pixels, of each cell in the grid.
		<br>&nbsp;</li>
	<li><a name="25TextForegroundColorIndex"><b>Text Foreground Color Index</b></a><br>
		Index into the <a href="#GlobalColorTable">Global Color Table</a> to be used to render the text foreground.
		<br>&nbsp;</li>
	<li><a name="25TextBackgroundColorIndex"><b>Text Background Color Index</b></a><br>
		Index into the <a href="#GlobalColorTable">Global Color Table</a> to be used to render the text background.
		<br>&nbsp;</li>
	<li><a name="25PlainTextData"><b>Plain Text Data</b></a><br>
		Sequence of <a href="#DataSub-blocks">sub-blocks</a>, each of size at most 255 bytes and at least 1 byte, with the size in a byte preceding the data.  The end of the sequence is marked by the <a href="#25BlockTerminator">Block Terminator</a>.
		<br>&nbsp;</li>
	<li><a name="25BlockTerminator"><b>Block Terminator</b></a><br>
		This zero-length data block marks the end of the Plain Text Data Blocks.
		</li>
	</ol>
	<br>
	</li>
<li><b>Extensions and Scope.</b><br>
	<p>The scope of this block is the Plain Text Data Block contained in it. This block may be modified by the <a href="#GraphicControlExtension">Graphic Control Extension</a>.</p>
	</li>
<li><a name="25Recommendations"><b>Recommendations.</b></a><br>
	<p>The data in the Plain Text Extension is assumed to be preformated. The selection of font and size is left to the discretion of the <a href="#TheDecoder">decoder</a>.  If characters less than 0x20 or greater than 0xf7<sup><font size="-1" color="#FF0000">*</font></sup> are encountered, it is recommended that the decoder display a Space character (0x20). The encoder should use grid and cell dimensions such that an integral number of cells fit in the grid both horizontally as well as vertically.  For broadest compatibility, character cell dimensions should be around 8x8 or 8x16 (width x height); consider an image for unusual sized text.</p>

<table border=0 cellspacing=0 cellpadding=0>
<tr>	<td width=16></td>
	<td>
		<table border=1 cellspacing=0 cellpadding=4 bgcolor="#CCCCCC">
		<tr><td><sup><font color="#FF0000">*</font></sup> Probably this value &quot;0xf7&quot; is an error and it should be &quot;0x7e&quot;, since the textual data are the 7-bit printable ASCII characters.</td></tr>
		</table>
	</td>
	<td width=16></td>
</tr>
</table>
	</li>
</ol>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="ApplicationExtension">26. Application Extension.</a></H2>
<ol type="a">
<li><b>Description.</b><br>
	<p>The Application Extension contains application-specific information; it conforms with the extension block syntax, as described below, and its block label is 0xFF.</p>
	</li>
<li><b>Required Version.</b><br>
	<p>89a.</p>
	</li>
<li><b>Syntax.</b><br>
<pre>
      7 6 5 4 3 2 1 0    Field Name                 Type
     +---------------+
  0  |     0x21      |   <a href="#26ExtensionIntroducer">Extension Introducer</a>       Byte
     +---------------+
  1  |     0xFF      |   <a href="#26ApplicationExtensionLabel">Extension Label</a>            Byte
     +---------------+

     +---------------+
  0  |     0x0B      |   <a href="#26BlockSize">Block Size</a>                 Byte
     +---------------+
  1  |               |
     +-             -+
  2  |               |
     +-             -+
  3  |               |   <a href="#26ApplicationIdentifier">Application Identifier</a>     8 Bytes
     +-             -+
  4  |               |
     +-             -+
  5  |               |
     +-             -+
  6  |               |
     +-             -+
  7  |               |
     +-             -+
  8  |               |
     +---------------+
  9  |               |
     +-             -+
 10  |               |   <a href="#26ApplicationAuthenticationCode">Appl. Authentication Code</a>  3 Bytes
     +-             -+
 11  |               |
     +---------------+

     +===============+
     |               |
     |               |   Application Data           <a href="#DataSub-blocks">Data Sub-blocks</a>
     |               |
     |               |
     +===============+

     +---------------+
  0  |     0x00      |   Block Terminator</a>           Byte
     +---------------+
</pre>
	<ol type="i">
	<li><a name="26ExtensionIntroducer"><b>Extension Introducer</b></a><br>
		Defines this block as an extension. This field contains the fixed value 0x21.
		<br>&nbsp;</li>
	<li><a name="26ApplicationExtensionLabel"><b>Application Extension Label</b></a><br>
		Identifies the block as an Application Extension. This field contains the fixed value 0xFF.
		<br>&nbsp;</li>
	<li><a name="26BlockSize"><b>Block Size</b></a><br>
		Number of bytes in this extension block, following the Block Size field, up to but not including the beginning of the Application Data. This field contains the fixed value 11.
		<br>&nbsp;</li>
	<li><a name="26ApplicationIdentifier"><b>Application Identifier</b></a><br>
		Sequence of eight printable ASCII characters used to identify the application owning the Application Extension. <nobr>[<a href="#CourtesyDirectoryFile">Courtesy Directory file</a>]</nobr>
		<br>&nbsp;</li>
	<li><a name="26ApplicationAuthenticationCode"><b>Application Authentication Code</b></a><br>
		Sequence of three bytes used to authenticate the <a href="#26ApplicationIdentifier">Application Identifier</a>. An Application program may use an algorithm to compute a binary code that uniquely identifies it as the application owning the Application Extension.
		<br>&nbsp;</li>
	</ol>
	<br>
	</li>
<li><b>Extensions and Scope.</b><br>
	<p>This block does not have scope. This block cannot be modified by any extension.</p>
	</li>
<li><b>Recommendation.</b><br>
	<p>None.</p>
	</li>
</ol>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="Trailer">27. Trailer.</a></H2>
<ol type="a">
<li><b>Description.</b><br>
	<p>This block is a single-field block indicating the end of the GIF <a href="#DataStream">Data Stream</a>. It contains the fixed value 0x3B.</p>
	</li>
<li><b>Required Version.</b><br>
	<p>87a.</p>
	</li>
<li><b>Syntax.</b><br>
<pre>
      7 6 5 4 3 2 1 0    Field Name            Type
     +---------------+
  0  |     0x3B      |   GIF Trailer           Byte
     +---------------+
</pre>
<li><b>Extensions and Scope.</b></br>
	<p>This block does not have scope, it terminates the GIF Data Stream. This block may not be modified by any extension.</p>
	</li>
<li><b>Recommendations.</b><br>
	<p>None.</p>
	</li>
</ol>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr size=2>
<br>

<H2><a name="QuickReferenceTable">Appendix A. Quick Reference Table.</a></H2>

<table border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=16></td>
<td>

<table border=1 CellSpacing=0>
<tr><th width=200>Block Name</th><th>Required</th><th width=80>Label</th><th>Extension</th><th>Version</th><tr>
<tr><td><a href="#ApplicationExtension">Application Extension</a></td><td>Opt. (*)</td><td>0xFF (255)</td><td>yes</td><td>89a</td></tr>
<tr><td><a href="#CommentExtension">Comment Extension</a></td><td>Opt. (*)</td><td>0xFE (254)</td><td>yes</td><td>89a</td></tr>
<tr><td><a href="#GlobalColorTable">Global Color Table</a></td><td>Opt. (1)</td><td>none</td><td>no</td><td>87a</td></tr>
<tr><td><a href="#GraphicControlExtension">Graphic Control Extension</a></td><td>Opt. (*)</td><td>0xF9 (249)</td><td>yes</td><td>89a</td></tr>
<tr><td><a href="#Header">Header</a></td><td>Req. (1)</td><td>none</td><td>no</td><td>N/A</td></tr>
<tr><td><a href="#ImageDescriptor">Image Descriptor</a></td><td>Opt. (*)</td><td>0x2C (044)</td><td>no</td><td>87a (89a)</td></tr>
<tr><td><a href="#LocalColorTable">Local Color Table</a></td><td>Opt. (*)</td><td>none</td><td>no</td><td>87a</td></tr>
<tr><td><a href="#LogicalScreenDescriptor">Logical Screen Descriptor</a></td><td>Req. (1)</td><td>none</td><td>no</td><td>87a (89a)</td></tr>
<tr><td><a href="#PlainTextExtension">Plain Text Extension</a></td><td>Opt. (*)</td><td>0x01 (001)</td><td>yes</td><td>89a</td></tr>
<tr><td><a href="#Trailer">Trailer</a></td><td>Req. (1)</td><td>0x3B (059)</td><td>no</td><td>87a</td></tr>
</table>

</td>
</tr>
</table>

<h3><a name="UnlabeledBlocks">Unlabeled Blocks</a></h3>

<table border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=16></td>
<td>

<table border=1 CellSpacing=0>
<tr><th width=200>Block Name</th><th>Required</th><th width=80>Label</th><th>Extension</th><th>Version</th><tr>
<tr><td><a href="#Header">Header</a></td><td>Req. (1)</td><td>none</td><td>no</td><td>N/A</td></tr>
<tr><td><a href="#LogicalScreenDescriptor">Logical Screen Descriptor</a></td><td>Req. (1)</td><td>none</td><td>no</td><td>87a (89a)</td></tr>
<tr><td><a href="#GlobalColorTable">Global Color Table</a></td><td>Opt. (1)</td><td>none</td><td>no</td><td>87a</td></tr>
<tr><td><a href="#LocalColorTable">Local Color Table</a></td><td>Opt. (*)</td><td>none</td><td>no</td><td>87a</td></tr>
</table>

</td>
</tr>
</table>

<h3><a name="Graphic-RenderingBlocks">Graphic-Rendering Blocks</a></h3>

<table border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=16></td>
<td>

<table border=1 CellSpacing=0>
<tr><th width=200>Block Name</th><th>Required</th><th width=80>Label</th><th>Extension</th><th>Version</th><tr>
<tr><td><a href="#PlainTextExtension">Plain Text Extension</a></td><td>Opt. (*)</td><td>0x01 (001)</td><td>yes</td><td>89a</td></tr>
<tr><td><a href="#ImageDescriptor">Image Descriptor</a></td><td>Opt. (*)</td><td>0x2C (044)</td><td>no</td><td>87a (89a)</td></tr>
</table>

</td>
</tr>
</table>

<h3><a name="ControlBlocks">Control Blocks</a></h3>

<table border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=16></td>
<td>

<table border=1 CellSpacing=0>
<tr><th width=200>Block Name</th><th>Required</th><th width=80>Label</th><th>Extension</th><th>Version</th><tr>
<tr><td><a href="#GraphicControlExtension">Graphic Control Extension</a></td><td>Opt. (*)</td><td>0xF9 (249)</td><td>yes</td><td>89a</td></tr>
</table>

</td>
</tr>
</table>

<h3><a name="SpecialPurposeBlocks">Special Purpose Blocks</a></H3>

<table border=0 cellpadding=0 cellspacing=0>
<tr>
<td width=16></td>
<td>

<table border=1 CellSpacing=0>
<tr><th width=200>Block Name</th><th>Required</th><th width=80>Label</th><th>Extension</th><th>Version</th><tr>
<tr><td><a href="#Trailer">Trailer</a></td><td>Req. (1)</td><td>0x3B (059)</td><td>no</td><td>87a</td></tr>
<tr><td><a href="#CommentExtension">Comment Extension</a></td><td>Opt. (*)</td><td>0xFE (254)</td><td>yes</td><td>89a</td></tr>
<tr><td><a href="#ApplicationExtension">Application Extension</a></td><td>Opt. (*)</td><td>0xFF (255)</td><td>yes</td><td>89a</td></tr>
</table>

</td>
</tr>
</table>

<br>
Legend:
<ul>
<li>	(1)&nbsp;&nbsp;if present, at most one occurrence</li>
<li>	(*)&nbsp;&nbsp;zero or more occurrences</li>
<li>	(+)&nbsp;&nbsp;one or more occurrences</li>
</ul>
<br>
Notes:
<ul>
<li>	The <a href="#Header">Header</a> is not subject to
	<a href="#VersionNumbers">Version Numbers</a>.
	</li>
<li>	(89a) The <a href="#LogicalScreenDescriptor">Logical Screen Descriptor</a> and the <a href="#ImageDescriptor">Image Descriptor</a> retained their syntax from version 87a to version 89a, but some fields reserved under version 87a are used under version 89a.
	</li>
</ul>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="GIFGrammar">Appendix B. GIF Grammar.</a></H2>
<p>
A Grammar is a form of notation to represent the sequence in which certain objects form larger objects.  A grammar is also used to represent the number of objects that can occur at a given position.  The grammar given here represents the sequence of blocks that form the GIF <a href="#DataStream">Data Stream</a>. A grammar is given by listing its rules.  Each rule consists of the left-hand side, followed by some form of equals sign, followed by the right-hand side.  In a rule, the right-hand side describes how the left-hand side is defined. The right-hand side consists of a sequence of entities, with the possible presence of special symbols. The following legend defines the symbols used in this grammar for GIF.</p>

<table border=0 cellspacing=0 cellpadding=0>
<tr>	<td rowspan=6 width=16></td>
	<td rowspan=6 valign="top">Legend:&nbsp;</td>
	<td align="center" valign="top">&lt; &gt;</td><td>&nbsp;grammar word</td></tr>
<tr>	<td align="center" valign="top">::=</td><td>&nbsp;defines symbol</td></tr>
<tr>	<td align="center" valign="top"> *</td><td>&nbsp;zero or more occurrences</td></tr>
<tr>	<td align="center" valign="top"> +</td><td>&nbsp;one or more occurrences</td></tr>
<tr>	<td align="center" valign="top"> |</td><td>&nbsp;alternate element</td></tr>
<tr>	<td align="center" valign="top">[ ]</td><td>&nbsp;optional element</td></tr>
</table>
<p>Example:</p>
<p>&lt;GIF Data Stream&gt; ::= Header &lt;Logical Screen&gt; &lt;Data&gt;* Trailer</p>
<p>
This rule defines the entity &lt;GIF Data Stream&gt; as follows. It must begin with a Header. The Header is followed by an entity called Logical Screen, which is defined below by another rule. The Logical Screen is followed by the entity Data, which is also defined below by another rule. Finally, the entity Data is followed by the Trailer.  Since there is no rule defining the Header or the Trailer, this means that these blocks are defined in the document.  The entity Data has a special symbol (*) following it which means that, at this position, the entity Data may be repeated any number of times, including 0 times. For further reading on this subject, refer to a standard text on Programming Languages.
</p>

<H4>The Grammar.</H4>

<table border=0 cellspacing=0 cellpadding=0>
<tr>	<td width=16 rowspan=7></td>
	<td valign="top" nowrap>&lt;GIF Data Stream&gt;</td>
	<td valign="top">::=</td>
	<td valign="top" align="left"><nobr><a href="#Header">Header</a><wbr> &lt;Logical Screen&gt;<wbr> &lt;Data&gt;*<wbr> <a href="#Trailer">Trailer</a></nobr></td>
</tr>
<tr>	<td valign="top" nowrap>&lt;Logical Screen&gt;</td>
	<td valign="top">::=</td>
	<td valign="top" align="left"><nobr><a href="#LogicalScreenDescriptor">Logical Screen Descriptor</a><wbr> [<a href="#GlobalColorTable">Global Color Table</a>]</nobr></td>
</tr>
<tr>	<td valign="top" nowrap>&lt;Data&gt;</td>
	<td valign="top">::=</td>
	<td valign="top" align="left"><nobr>&lt;Graphic Block&gt;<wbr>  |<wbr> &lt;Special-Purpose Block&gt;</nobr></td>
</tr>
<tr>	<td valign="top" nowrap>&lt;Graphic Block&gt;</td>
	<td valign="top">::=</td>
	<td valign="top" align="left"><nobr>[<a href="#GraphicControlExtension">Graphic Control Extension</a>]<wbr> &lt;Graphic-Rendering Block&gt;</nobr></td>
</tr>
<tr>	<td valign="top" nowrap>&lt;Graphic-Rendering Block&gt;</td>
	<td valign="top">::=</td>
	<td valign="top" align="left"><nobr>&lt;Table-Based Image&gt; |<wbr> <a href="#PlainText Extension">PlainText Extension</a></nobr></td>
</tr>
<tr>	<td valign="top" nowrap>&lt;Table-Based Image&gt;</td>
	<td valign="top">::=</td>
	<td valign="top" align="left"><nobr><a href="#ImageDescriptor">Image Descriptor</a><wbr> [<a href="#LocalColorTable">Local Color Table</a>]<wbr> <a href="#TableBasedImageData">Image Data</a></nobr></td>
</tr>
<tr>	<td valign="top" nowrap>&lt;Special-Purpose Block&gt;</td>
	<td valign="top">::=</td>
	<td valign="top" align="left"><nobr><a href="#ApplicationExtension">Application Extension</a> |<wbr> <a href="#CommentExtension">Comment Extension</a></nobr></td>
</tr>
</table>

<p>
NOTE: The grammar indicates that it is possible for a GIF <a href="#DataStream">Data Stream</a> to contain the <a href="#Header">Header</a>, the <a href="#LogicalScreenDescriptor">Logical Screen Descriptor</a>, a <a href="#GlobalColorTable">Global Color Table</a> and the GIF <a href="#Trailer">Trailer</a>. This special case is used to load a GIF decoder with a Global Color Table, in preparation for subsequent Data Streams without color tables at all.
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="Glossary">Appendix C. Glossary.</a></H2>
<dl>
<dt><b><a name="ActiveColorTable">Active Color Table</a></b><dd>
	<a href="#AboutColorTables">Color table</a> used to render the next <a href="#Graphic">graphic</a>. If the next graphic is an <a href="#Image">image</a> which has a <a href="#LocalColorTable">Local Color Table</a> associated with it, the active color table becomes the Local Color Table associated with that image. If the next graphic is an image without a Local Color Table, or a <a href="#PlainTextExtension">Plain Text Extension</a>, the active color table is the <a href="#GlobalColorTable">Global Color Table</a> associated with the Data Stream, if there is one; if there is no Global Color Table in the Data Stream, the active color table is a color table saved from a previous Data Stream, or one supplied by the <a href="#TheDecoder">decoder</a>.
	<br>&nbsp;
<dt><b><a href="#BlocksExtensionsScope">Block</a></b><dd>
	Collection of bytes forming a protocol unit. In general, the term includes labeled and unlabeled blocks, as well as Extensions.
	<br>&nbsp;
<dt><b><a name="DataStream">Data Stream</a></b><dd>
	The GIF Data Stream is composed of <a href="#BlocksExtensionsScope">blocks</a> and <a href="#DataSub-blocks">sub-blocks</a> representing <a href="#Image">images</a> and <a href="#Graphic">graphics</a>, together with control information to render them on a display device. All control and data blocks in the Data Stream must follow the <a href="#Header">Header</a> and must precede the <a href="#Trailer">Trailer</a>.
	<br>&nbsp;
<dt><b><a href="#TheDecoder">Decoder</a></b><dd>
	A program capable of processing a GIF <a href="#DataStream">Data Stream</a> to render the <a href="#Image">images</a> and <a href="#Graphic">graphics</a> contained in it.
	<br>&nbsp;
<dt><b><a href="#TheEncoder">Encoder</a></b><dd>
	A program capable of capturing and formatting <a href="#Image">image</a> and <a href="#Graphic">graphic</a> <a href="#Raster">raster</a> data, following the definitions of the Graphics Interchange Format.
	<br>&nbsp;
<dt><b><a href="#BlocksExtensionsScope">Extension</a></b><dd>
	A protocol block labeled by the Extension Introducer 0x21.
	<br>&nbsp;
<dt><b><a name="ExtensionIntroducer">Extension Introducer</a></b><dd>
	Label (0x21) defining an Extension.
	<br>&nbsp;
<dt><b><a name="Graphic">Graphic</a></b><dd>
	Data which can be rendered on the screen by virtue of some algorithm. The term graphic is more general than the term <a href="#Image">image</a>; in addition to images, the term graphic also includes data such as text, which is rendered using character bit-maps.
	<br>&nbsp;
<dt><b><a name="Image">Image</a></b><dd>
	Data representing a picture or a drawing; an image is represented by an array of pixels called the <a href="#Raster">raster</a> of the image.
	<br>&nbsp;
<dt><b><a name="Raster">Raster</a></b><dd>
	Array of pixel values representing an <a href="#Image">image</a>.
	<br>&nbsp;
</dl>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="Conventions">Appendix D. Conventions.</a></H2>
<dl>
<dt><b>Animation</b><dd>
	The Graphics Interchange Format is not intended as a platform for animation, even though it can be done in a limited way.
	<br>&nbsp;
<dt><b><a name="ByteOrdering">Byte Ordering</a></b><dd>
	Unless otherwise stated, multi-byte numeric fields are ordered with the Least Significant Byte first.
	<br>&nbsp;
<dt><b><a name="ColorIndices">Color Indices</a></b><dd>
	Color indices always refer to the <a href="#ActiveColorTable">active color table</a>, either the <a href="#GlobalColorTable">Global Color Table</a> or the <a href="#LocalColorTable">Local Color Table</a>.
	<br>&nbsp;
<dt><b><a name="ColorOrder">Color Order</a></b><dd>
	Unless otherwise stated, all triple-component RGB color values are specified in Red-Green-Blue order.
	<br>&nbsp;
<dt><b><a name="ColorTables" href="#AboutColorTables">Color Tables</a></b><dd>
	Both color tables, the Global and the Local, are optional; if present, the <a href="#GlobalColorTable">Global Color Table</a> is to be used with every <a href="#Image">image</a> in the <a href="#DataStream">Data Stream</a> for which a <a href="#LocalColorTable">Local Color Table</a> is not given; if present, a Local Color Table overrides the Global Color Table. However, if neither color table is present, the application program is free to use an arbitrary color table. If the <a href="#Graphic">graphics</a> in several Data Streams are related and all use the same color table, an <a href="#TheEncoder">encoder</a> could place the color table as the Global Color Table in the first Data Stream and leave subsequent Data Streams without a Global Color Table or any Local Color Tables; in this way, the overhead for the table is eliminated.  It is recommended that the <a href="#TheDecoder">decoder</a> save the previous Global Color Table to be used with the Data Stream that follows, in case it does not contain either a Global Color Table or any Local Color Tables. In general, this allows the application program to use past color tables, significantly reducing transmission overhead.
	<br>&nbsp;
<dt><b>Extension Blocks</b><dd>
	Extensions are defined using the <a href="#ExtensionIntroducer">Extension Introducer</a> code to mark the beginning of the block, followed by a <a href="#LabelRanges">block label</a>, identifying the type of extension.  Extension Codes are numbers in the range from 0x00 to 0xFF, inclusive. <a href="#SpecialPurposeBlocks">Special purpose extensions</a> are transparent to the <a href="#TheDecoder">decoder</a> and may be omitted when transmitting the <a href="#DataStream">Data Stream</a> on-line. The <a href="#On-lineCapabilitiesDialogue">GIF capabilities dialogue</a> makes the provision for the receiver to request the transmission of all blocks; the default state in this regard is no transmission of <a href="#SpecialPurposeBlocks">Special purpose blocks</a>.
	<br>&nbsp;
<dt><b><a name="ReservedFields">Reserved Fields</a></b><dd>
	All Reserved Fields are expected to have each bit set to zero(off).
	<br>&nbsp;
</dl>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="InterlacedImages">Appendix E. Interlaced Images.</a></H2>
<p>
The rows of an Interlaced images are arranged in the following order:
</p>
<pre>
      Group 1 : Every 8th. row, starting with row 0.     (Pass 1)
      Group 2 : Every 8th. row, starting with row 4.     (Pass 2)
      Group 3 : Every 4th. row, starting with row 2.     (Pass 3)
      Group 4 : Every 2nd. row, starting with row 1.     (Pass 4)
</pre>
<p>
The Following example illustrates how the rows of an interlaced image are ordered.
</p>
<pre>
  Row Number                                 Interlace Pass

    0   -------------------------------------   1
    1   -------------------------------------            4
    2   -------------------------------------         3
    3   -------------------------------------            4
    4   -------------------------------------      2
    5   -------------------------------------            4
    6   -------------------------------------         3
    7   -------------------------------------            4
    8   -------------------------------------   1
    9   -------------------------------------            4
   10   -------------------------------------         3
   11   -------------------------------------            4
   12   -------------------------------------      2
   13   -------------------------------------            4
   14   -------------------------------------         3
   15   -------------------------------------            4
   16   -------------------------------------   1
   17   -------------------------------------            4
   18   -------------------------------------         3
   19   -------------------------------------            4
</pre>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="Variable-Length-CodeLZWCompression">Appendix F. Variable-Length-Code LZW Compression.</a></H2>
<p>
The Variable-Length-Code LZW Compression is a variation of the Lempel-Ziv Compression algorithm in which variable-length codes are used to replace patterns detected in the original data. The algorithm uses a code or translation table constructed from the patterns encountered in the original data; each new pattern is entered into the table and its index is used to replace it in the compressed stream.
</p>
<p>
The compressor takes the data from the input stream and builds a code or translation table with the patterns as it encounters them; each new pattern is entered into the code table and its index is added to the output stream; when a pattern is encountered which had been detected since the last code table refresh, its index from the code table is put on the output stream, thus achieving the data compression.  The expander takes input from the compressed <a href="#DataStream">data stream</a> and builds the code or translation table from it; as the compressed data stream is processed, codes are used to index into the code table and the corresponding data is put on the decompressed output stream, thus achieving data decompression.  The details of the algorithm are explained below.  The Variable-Length-Code aspect of the algorithm is based on an initial code size (LZW-initial code size), which specifies the initial number of bits used for the compression codes.  When the number of patterns detected by the compressor in the input stream exceeds the number of patterns encodable with the current number of bits, the number of bits per LZW code is increased by one.
</p>
<p>
The <a href="#Raster">Raster</a> <a href="#DataStream">Data stream</a> that represents the actual output <a href="#Image">image</a> can be represented as:
</p>
<pre>
         7 6 5 4 3 2 1 0
        +---------------+
        | <a href="#EstablishCodeSize">LZW code size</a> |
        +---------------+

        +---------------+ ----+
        |  block size   |     |
        +---------------+     |
        |               |     +-- Repeated as many
        |  data bytes   |     |   times as necessary.
        |               |     |
        +---------------+ ----+

        . . .       . . . ------- The code that terminates the LZW
                                  compressed data must appear before
                                  Block Terminator.
        +---------------+
        |0 0 0 0 0 0 0 0|  Block Terminator
        +---------------+
</pre>
<p>
The conversion of the <a href="#Image">image</a> from a series of pixel values to a transmitted or
stored character stream involves several steps. In brief these steps are:
</p>
<ol>
<li><a href="#EstablishCodeSize"><b>Establish the Code Size</b></a><br>
	Define the number of bits needed to represent the actual data.<br>&nbsp;</li>
<li><a href="#Compression"><b>Compress the Data</b></a><br>
	Compress the series of image pixels to a series of compression codes.<br>&nbsp;</li>
<li><a href="#Build8-bitBytes"><b>Build a Series of Bytes</b></a><br>
	Take the set of compression codes and convert to a string of 8-bit bytes.<br>&nbsp;</li>
<li><a href="#PackageTheBytes"><b>Package the Bytes</b></a><br>
	Package sets of bytes into blocks preceded by character counts and output.<br>&nbsp;</li>
</ol>
<br>
<H3><a name="EstablishCodeSize">ESTABLISH CODE SIZE</a></H3>
<p>
The first byte of the Compressed Data stream is a value indicating the minimum number of bits required to represent the set of actual pixel values. Normally this will be the same as the number of color bits. Because of some algorithmic constraints however, black &amp; white images which have one color bit must be indicated as having a code size of <b>2</b>.<br>
This code size value also implies that the compression codes must start out one bit longer.
</p>
<br>
<H3><a name="Compression">COMPRESSION</a></H3>
<p>
The LZW algorithm converts a series of data values into a series of codes which may be raw values or a code designating a series of values. Using text characters as an analogy, the output code consists of a character or a code representing a string of characters.
</p>
<p>
The LZW algorithm used in GIF matches algorithmically with the standard LZW algorithm with the following differences:
</p>
<ol>
<li>	A special <a name="ClearCode"><b>Clear code</b></a> is defined which resets all compression/decompression parameters and tables to a start-up state. The value of this code is <b><nobr>2**&lt;<a href="#EstablishCodeSize">code size</a>&gt;</nobr></b>. For example if the code size indicated was 4 (image was 4 bits/pixel) the Clear code value would be 16 (10000 binary). The Clear code can appear at any point in the image data stream and therefore requires the LZW algorithm to process succeeding codes as if a new data stream was starting. Encoders should output a Clear code as the first code of each image data stream.
	<br>&nbsp;
</li>
<li>	An <a name="EndOfInformationCode"><b>End of Information code</b></a> is defined that explicitly indicates the end of the image data stream. LZW processing terminates when this code is encountered. It must be the last code output by the encoder for an image. The value of this code is <b>&lt;<a href="#ClearCode">Clear code</a>&gt;+1</b>.
	<br>&nbsp;</li>
<li>	The first available compression code value is <b>&lt;<a href="#ClearCode">Clear code</a>&gt;+2</b>.
	<br>&nbsp;</li>
<li>	<a name="MaximumCodeSize"></a>The output codes are of variable length,
	starting at <b>&lt;<a href="#EstablishCodeSize">code size</a>&gt;+1 bits</b> per code, up to <b>12 bits</b> per code. This defines a maximum code value of <b>4095</b> (<b>0xFFF</b>). Whenever the LZW code value would exceed the current code length, the code length is increased by one. The packing/unpacking of these codes must then be altered to reflect the new code length.
	<br>&nbsp;
</li>
</ol>
<br>
<H3><a name="Build8-bitBytes">BUILD 8-BIT BYTES</a></H3>
<p>
Because the LZW compression used for GIF creates a series of variable length codes, of between <b>3</b> and <b>12</b> bits each, these codes must be reformed into a series of 8-bit bytes that will be the characters actually stored or transmitted. This provides additional compression of the image. The codes are formed into a stream of bits as if they were packed right to left and then picked off 8 bits at a time to be output.
</p>
<p>
Assuming a character array of 8 bits per character and using 5 bit codes to be packed, an example layout would be similar to:
</p>
<pre>
       +---------------+
    0  |               |    bbbaaaaa
       +---------------+
    1  |               |    dcccccbb
       +---------------+
    2  |               |    eeeedddd
       +---------------+
    3  |               |    ggfffffe
       +---------------+
    4  |               |    hhhhhggg
       +---------------+
             . . .
       +---------------+
    N  |               |
       +---------------+
</pre>
<p>
Note that the physical packing arrangement will change as the number of bits per compression code change but the concept remains the same.
</p>
<br>

<table border=0 cellspacing=0 cellpadding=0>
<tr>
<td width=16></td>
<td>

<table border=1 cellspacing=0 cellpadding=4 bgcolor="#CCCCCC">
<tr>
<td>
<b>Supplement: Byte Order and Bit Order</b><br>
GIF is a <a name="LittleEndian">little-endian</a> format,
which stores the least significant byte at the lowest address in a word.
When two compressed codes are stored in the same byte, the earlier code is stored in the lower bits of the byte.
When a code crosses a byte boundary, its least significant bits are stored in the lower byte.
<br>
Assuming 5-bit codes
<nobr><font face="Courier New">&lt;ABCDE&gt;</font></nobr>,
<nobr><font face="Courier New">&lt;FGHIJ&gt;</font></nobr> and
<nobr><font face="Courier New">&lt;KLMNO&gt;</font></nobr>
to be packed,
where <font face="Courier New">E</font>, <font face="Courier New">J</font>, and <font face="Courier New">O</font> are the least significant bit,
an example layout would be similar to: 
<pre>
       +---------------+
    0  |               |    <font color="#000099">HIJ</font><font color="#990000">ABCDE</font>
       +---------------+
    1  |               |    _<font color="#009900">KLMNO</font><font color="#000099">FG</font>
       +---------------+
</pre>
</td>
</tr>
</table>

</td>
<td width=16></td>
</tr>
</table>

<br>
<H3><a name="PackageTheBytes">PACKAGE THE BYTES</a></H3>
<p>
Once the bytes have been created, they are grouped into blocks for output by preceding each block of <b>0</b> to <b>255</b> bytes with a character count byte. A block with a zero byte count terminates the <a href="#Raster">Raster</a> <a href="#DataStream">Data stream</a> for a given <a href="#Image">image</a>. These blocks are what are actually output for the GIF image. This block format has the side effect of allowing a decoding program the ability to read past the actual image data if necessary by reading block counts and then skipping over the data.
</p>
<br>
<H3>FURTHER READING</H3>
<table border=0 cellspacing=0 cellpadding=2>
<tr><td width=28 align="right" valign="top" nowrap>[1]&nbsp;</td><td align="top"><nobr>Ziv, J. and Lempel, A. : <wbr> &quot;A Universal Algorithm for<wbr> Sequential Data Compression&quot;,<wbr> <i>IEEE Transactions on Information Theory</i>,<wbr> May 1977.</nobr></td></tr>
<tr><td width=28 align="right" valign="top" nowrap>[2]&nbsp;</td><td align="top"><nobr>Welch, T. : <wbr> &quot;A Technique for High-Performance<wbr> Data Compression&quot;,<wbr> <i>Computer</i>, June 1984.</nobr></td></tr>
<tr><td width=28 align="right" valign="top" nowrap>[3]&nbsp;</td><td align="top"><nobr>Nelson, M.R. : <wbr> &quot;LZW Data Compression&quot;,<wbr> <i>Dr. Dobb's Journal</i>,<wbr> October 1989.</nobr></td></tr>
</table>
<br>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<hr>
<br>


<H2><a name="On-lineCapabilitiesDialogue">Appendix G. On-line Capabilities Dialogue.</a></H2>
<p>
NOTE : This section is currently (10 July 1990) under revision; the information provided here should be used as general guidelines. Code written based on this information should be designed in a flexible way to accommodate any changes resulting from the revisions.
</p>
<p>
The following sequences are defined for use in mediating control between a GIF sender and GIF receiver over an interactive communications line. These sequences do not apply to applications that involve downloading of static GIF files and are not considered part of a GIF file.
</p>

<H3>GIF CAPABILITIES ENQUIRY</H3>
<p>
The GIF Capabilities Enquiry sequence is issued from a host and requests an interactive GIF decoder to return a response message that defines the graphics parameters for the decoder. This involves returning information about available screen sizes, number of bits/color supported and the amount of color detail supported. The escape sequence for the GIF Capabilities Enquiry is defined as:
</p>
<p><nobr>ESC[&gt;0g&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0x1B 0x5B 0x3E 0x30 0x67</nobr></p>

<H3>GIF CAPABILITIES RESPONSE</H3>
<p>
The GIF Capabilities Response message is returned by an interactive GIF decoder and defines the decoder's display capabilities for all graphics modes that are supported by the software. Note that this can also include graphics printers as well as a monitor screen. The general format of this message is:
</p>
<p><nobr>#version;protocol{;dev, width, height, color-bits, color-res}...&lt;CR&gt;</nobr></p>
<table border=0 cellspacing=0 cellpadding=0>
<tr>	<td width=16 rowspan=10></td>
	<td valign="top">'#'</td>
	<td valign="top">GIF Capabilities Response identifier character.</td>
	</tr>
<tr>	<td valign="top" nowrap>version&nbsp;</td>
        <td valign="top">GIF format <a href="#17Version">version number</a>;  initially '87a'.</td>
	</tr>
<tr>	<td valign="top" nowrap>protocol='0'&nbsp;</td>
	<td valign="top">No end-to-end protocol supported by decoder Transfer as direct 8-bit data stream.</td>
	</tr>
<tr>	<td valign="top" nowrap>protocol='1'&nbsp;</td>
	<td valign="top">Can use CIS B+ error correction protocol to transfer GIF data  interactively from the host directly to the display.</td>
	</tr>
<tr>	<td valign="top" nowrap>dev = '0'&nbsp;</td>
	<td valign="top">Screen parameter set follows.</td>
	</tr>
<tr>	<td valign="top" nowrap>dev = '1'&nbsp;</td>
	<td valign="top">Printer parameter set follows.</td>
	</tr>
<tr>	<td valign="top" nowrap>width&nbsp;</td>
	<td valign="top">Maximum supported display width in pixels.</td>
	</tr>
<tr>	<td valign="top" nowrap>height&nbsp;</td>
	<td valign="top">Maximum supported display height in pixels.</td>
	</tr>
<tr>	<td valign="top" nowrap>color-bits&nbsp;</td>
	<td valign="top">Number of bits per pixel supported. The number of supported colors is therefore <nobr>2**color-bits</nobr>.</td>
	</tr>
<tr>	<td valign="top" nowrap>color-res&nbsp;</td>
	<td valign="top">Number of bits per color component supported in the hardware color palette. If color-res is '0' then no hardware palette table is available.</td>
	</tr>
</table>
<p>
Note that all values in the GIF Capabilities Response are returned as ASCII decimal numbers and the message is terminated by a Carriage Return character.
</p>
<p>
The following GIF Capabilities Response message describes three standard IBM PC Enhanced Graphics Adapter configurations with no printer; the GIF data stream can be processed within an error correcting protocol:
</p>
<p><nobr>#87a;1;0,320,200,4,0;0,640,200,2,2;0,640,350,4,2&lt;CR&gt;</nobr></p>

<H3>ENTER GIF GRAPHICS MODE</H3>
<p>
Two sequences are currently defined to invoke an interactive GIF decoder into action. The only difference between them is that different output media are selected. These sequences are:
</p>
<table border=0 cellspacing=0 cellpadding=0>
<tr>	<td width=16 rowspan=2></td>
	<td width="0*" valign="top" nowrap>ESC[&gt;1g&nbsp;&nbsp;&nbsp;</td>
	<td valign="top">Display GIF image on screen<br><nobr>0x1B 0x5B 0x3E 0x31 0x67</nobr></td>
</tr>
<tr>	<td width="0*" valign="top" nowrap>ESC[&gt;2g&nbsp;&nbsp;&nbsp;</td>
	<td valign="top">Display image directly to an attached graphics printer. The image may optionally be displayed on the screen as well.<br><nobr>0x1B 0x5B 0x3E 0x32 0x67</nobr></td>
</tr>
</table>
<p>
Note that the 'g' character terminating each sequence is in lowercase.
</p>

<H3>INTERACTIVE ENVIRONMENT</H3>
<p>
The assumed environment for the transmission of GIF image data from an interactive application is a full 8-bit data stream from host to micro.  All 256 character codes must be transferable. The establishing of an 8-bit data path for communications will normally be taken care of by the host application programs. It is however up to the receiving communications programs supporting GIF to be able to receive and pass on all 256 8-bit codes to the GIF decoder software.
</p>
<script language="JavaScript"><!--
	ToC(); // -->
</script>
<noscript>
	[<a href="#ToC">Table of Contents</a>]<br>
</noscript>
<br>
<br>
</BODY>
</HTML>
